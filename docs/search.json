[
  {
    "objectID": "tema8.html",
    "href": "tema8.html",
    "title": "Reformatear tablas",
    "section": "",
    "text": "Las funciones para cambiar las tablas de formato son melt y dcast. Estas funciones están optimizadas para funcionar con grandes cantidades de datos guardados en memoria (10GB)."
  },
  {
    "objectID": "tema8.html#larga-a-ancha",
    "href": "tema8.html#larga-a-ancha",
    "title": "Reformatear tablas",
    "section": "Larga a ancha",
    "text": "Larga a ancha\nActualmente tenemos una tabla larga. Vamos a convertirla en una tabla en la que las columnas sean los 73 paises y las canciones las filas. Los valores van a ser el numero de veces en las que cada canción ha aparecido en el listado de las 50 canciones más populares (data) en el último año. Adicionalmente vamos a mantener la columna de la fecha del listado (snapshot_date) pero la vamos a modificar de modo que nos quedemos con el mes y el año.\nLarga a ancha:\ndcast(data, formula, fun.aggregate = NULL, sep = \"_\",\n    ..., margins = NULL, subset = NULL, fill = NULL,\n    drop = TRUE, value.var = guess(data),\n    verbose = getOption(\"datatable.verbose\"))\n\n\n# Vamos a utilizar la tabla de canciones del top50 en 73 paises\n\n# Queremos crear una tabla de conteos de cada cancion por pais por mes en el que se hizo el listado top 50\nfreq_song_long &lt;- data[country != \"\",.(.N), by = .(name,country,month_yr = format(snapshot_date,\"%Y-%m\"))]\nfreq_song_long\n\n                                                     name country month_yr     N\n                                                   &lt;char&gt;  &lt;char&gt;   &lt;char&gt; &lt;int&gt;\n    1:  Yebo Lapho (Gogo) (feat. DJ Maphorisa & Djy Biza)      ZA  2024-09     8\n    2: Sdakiwe Sbali (feat. Bless The Gentleman & DJ Kap)      ZA  2024-09     8\n    3:      Mfazi Wephepha (feat. Big Zulu & Zee Nxumalo)      ZA  2024-09     8\n    4:      Kwelanga 2.0 (feat. Tman Xpress & LeeMcKrazy)      ZA  2024-09     8\n    5:                     eGoli (feat. Eltee & Novatron)      ZA  2024-09     8\n   ---                                                                          \n75846:                  Nachts wach (Lila Wolken Bootleg)      AT  2023-10     2\n75847:                                             HIBIKI      AR  2023-10     2\n75848:                          Slime You Out (feat. SZA)      AE  2023-10     2\n75849:                  SAY MY GRACE (feat. Travis Scott)      AE  2023-10     2\n75850:                                         Rainy Days      AE  2023-10     2\n\nfreq_song_wide &lt;- dcast(freq_song_long, month_yr+name~country, value.var = \"N\", fill = 0)\nfreq_song_wide[,1:9]\n\nKey: &lt;month_yr, name&gt;\n       month_yr                                          name    AE    AR    AT    AU    BE    BG    BO\n         &lt;char&gt;                                        &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;\n    1:  2023-10                                                   0     0     0     0     0     0     0\n    2:  2023-10 \"\"Slut!\"\" (Taylor's Version) (From The Vault)     3     0     3     3     3     3     0\n    3:  2023-10                                   $AD BOYZ II     0     0     0     0     0     0     0\n    4:  2023-10                  (It Goes Like) Nanana - Edit     0     0     0     5    14     0     0\n    5:  2023-10                                   0800 HEAVEN     0     0     0     0     0     0     0\n   ---                                                                                                 \n37446:  2024-09                                        青と夏     0     0     0     0     0     0     0\n37447:  2024-09                                高嶺の花子さん     0     0     0     0     0     0     0\n37448:  2024-09                                          黑月     0     0     0     0     0     0     0\n37449:  2024-09                                        黑玻璃     0     0     0     0     0     0     0\n37450:  2024-09                            별별별 (See that?)     0     0     0     0     0     0     0\n\n\nLa función dcast también nos permite agregar valores de acuerdo a una función mientras cambiamos el formato de las tablas. Esto es útil cuando nuestra fórmula no puede identificar de manera única cada fila. Por ejemplo, si quiseramos comparar la popularidad promedio de cada canción entre el 2023 y el 2024 podemos hacer lo siguiente:\n\ndcast(data[country != \"\"], country + name ~ format(snapshot_date,\"%Y\"), value.var = \"popularity\", fun.aggregate = function(x){round(mean(x, na.rm = T),digits = 1)})\n\nKey: &lt;country, name&gt;\n       country                                                                 name  2023  2024\n        &lt;char&gt;                                                               &lt;char&gt; &lt;num&gt; &lt;num&gt;\n    1:      AE                        \"\"Slut!\"\" (Taylor's Version) (From The Vault)  85.4   NaN\n    2:      AE                                         (It Goes Like) Nanana - Edit   NaN  87.0\n    3:      AE                                                            100 Bands   NaN  53.4\n    4:      AE                                                                   22   NaN  35.0\n    5:      AE                                                               3 Days   NaN   1.0\n   ---                                                                                         \n29523:      ZA uKhome Lotto (feat. Agzo, Optimist Music ZA, Seun1401 & El.Stephano)   NaN  55.3\n29524:      ZA                        uLala Kanjani (feat. LeeMcKrazy & Skandisoul)  61.0   NaN\n29525:      ZA                             we can't be friends (wait for your love)   NaN  91.5\n29526:      ZA                                                    whatsapp (wassam)   NaN   0.0\n29527:      ZA                                                            yes, and?   NaN  84.0\n\n\nAhora imagina que te gustaría pasar de ancha a larga utilizando dos columnas. Por ejemplo, para compara la popularidad y el ranking promedio por año. Podemos indicar múltiples columnas en value.var\n\npop_rank_per_year &lt;- dcast(data[country != \"\"], country + name ~ format(snapshot_date,\"%Y\"), value.var = c(\"daily_rank\", \"popularity\"), sep = \".\", fun.aggregate = function(x){round(mean(x, na.rm = T),digits = 1)})\n\npop_rank_per_year\n\nKey: &lt;country, name&gt;\n       country                                                                 name daily_rank.2023 daily_rank.2024\n        &lt;char&gt;                                                               &lt;char&gt;           &lt;num&gt;           &lt;num&gt;\n    1:      AE                        \"\"Slut!\"\" (Taylor's Version) (From The Vault)            28.7             NaN\n    2:      AE                                         (It Goes Like) Nanana - Edit             NaN            33.0\n    3:      AE                                                            100 Bands             NaN             2.7\n    4:      AE                                                                   22             NaN            26.0\n    5:      AE                                                               3 Days             NaN             1.0\n   ---                                                                                                             \n29523:      ZA uKhome Lotto (feat. Agzo, Optimist Music ZA, Seun1401 & El.Stephano)             NaN            42.0\n29524:      ZA                        uLala Kanjani (feat. LeeMcKrazy & Skandisoul)            33.1             NaN\n29525:      ZA                             we can't be friends (wait for your love)             NaN            33.3\n29526:      ZA                                                    whatsapp (wassam)             NaN            42.0\n29527:      ZA                                                            yes, and?             NaN            30.5\n       popularity.2023 popularity.2024\n                 &lt;num&gt;           &lt;num&gt;\n    1:            85.4             NaN\n    2:             NaN            87.0\n    3:             NaN            53.4\n    4:             NaN            35.0\n    5:             NaN             1.0\n   ---                                \n29523:             NaN            55.3\n29524:            61.0             NaN\n29525:             NaN            91.5\n29526:             NaN             0.0\n29527:             NaN            84.0"
  },
  {
    "objectID": "tema8.html#ancha-a-larga",
    "href": "tema8.html#ancha-a-larga",
    "title": "Reformatear tablas",
    "section": "Ancha a larga",
    "text": "Ancha a larga\nAncha a larga:\nmelt(data, id.vars, measure.vars,\n    variable.name = \"variable\", value.name = \"value\",\n    ..., na.rm = FALSE, variable.factor = TRUE,\n    value.factor = FALSE,\n    verbose = getOption(\"datatable.verbose\"))\n\n\nfreq_song_long2 &lt;- melt(freq_song_wide, id.vars = c(\"month_yr\",\"name\"), variable.name = \"country\", value.name = \"N\")\nfreq_song_long2\n\n         month_yr                                          name country     N\n           &lt;char&gt;                                        &lt;char&gt;  &lt;fctr&gt; &lt;int&gt;\n      1:  2023-10                                                    AE     0\n      2:  2023-10 \"\"Slut!\"\" (Taylor's Version) (From The Vault)      AE     3\n      3:  2023-10                                   $AD BOYZ II      AE     0\n      4:  2023-10                  (It Goes Like) Nanana - Edit      AE     0\n      5:  2023-10                                   0800 HEAVEN      AE     0\n     ---                                                                     \n2696396:  2024-09                                        青と夏      ZA     0\n2696397:  2024-09                                高嶺の花子さん      ZA     0\n2696398:  2024-09                                          黑月      ZA     0\n2696399:  2024-09                                        黑玻璃      ZA     0\n2696400:  2024-09                            별별별 (See that?)      ZA     0\n\n\nDe manera similar a dcast, podemos reformatear una tabla para conservar más de una columna en la tabla en formato largo. Por ejemplo, si tenemos la tabla generada anteriormente con el ranking promedio diario por año y la popularidad promedio por año, y quisiéramos una tabla que separara las medidas de popularidad en una columna y el ranking promedio en otra, podemos hacerlo de la siguiente manera:\n\n## Forma 1\ncolA = paste0(\"daily_rank.\", 2023:2024)\ncolB = paste0(\"popularity.\", 2023:2024)\npop_rank_year_long &lt;- pop_rank_per_year %&gt;% \n  melt(., measure = list(colA, colB), value.name = c(\"daily_rank\", \"popularity\"), variable.name = \"year\")\n\npop_rank_year_long[,year := ifelse(year == 1, 2023,2024)]\npop_rank_year_long\n\n       country                                                                 name  year daily_rank popularity\n        &lt;char&gt;                                                               &lt;char&gt; &lt;num&gt;      &lt;num&gt;      &lt;num&gt;\n    1:      AE                        \"\"Slut!\"\" (Taylor's Version) (From The Vault)  2023       28.7       85.4\n    2:      AE                                         (It Goes Like) Nanana - Edit  2023        NaN        NaN\n    3:      AE                                                            100 Bands  2023        NaN        NaN\n    4:      AE                                                                   22  2023        NaN        NaN\n    5:      AE                                                               3 Days  2023        NaN        NaN\n   ---                                                                                                         \n59050:      ZA uKhome Lotto (feat. Agzo, Optimist Music ZA, Seun1401 & El.Stephano)  2024       42.0       55.3\n59051:      ZA                        uLala Kanjani (feat. LeeMcKrazy & Skandisoul)  2024        NaN        NaN\n59052:      ZA                             we can't be friends (wait for your love)  2024       33.3       91.5\n59053:      ZA                                                    whatsapp (wassam)  2024       42.0        0.0\n59054:      ZA                                                            yes, and?  2024       30.5       84.0\n\n## Forma 2\n\npop_rank_per_year %&gt;% \n  melt(., measure = patterns(\"^daily_rank.\", \"^popularity.\"), value.name = c(\"daily_rank\", \"popularity\"), variable.name = \"year\")\n\n       country                                                                 name   year daily_rank popularity\n        &lt;char&gt;                                                               &lt;char&gt; &lt;fctr&gt;      &lt;num&gt;      &lt;num&gt;\n    1:      AE                        \"\"Slut!\"\" (Taylor's Version) (From The Vault)      1       28.7       85.4\n    2:      AE                                         (It Goes Like) Nanana - Edit      1        NaN        NaN\n    3:      AE                                                            100 Bands      1        NaN        NaN\n    4:      AE                                                                   22      1        NaN        NaN\n    5:      AE                                                               3 Days      1        NaN        NaN\n   ---                                                                                                          \n59050:      ZA uKhome Lotto (feat. Agzo, Optimist Music ZA, Seun1401 & El.Stephano)      2       42.0       55.3\n59051:      ZA                        uLala Kanjani (feat. LeeMcKrazy & Skandisoul)      2        NaN        NaN\n59052:      ZA                             we can't be friends (wait for your love)      2       33.3       91.5\n59053:      ZA                                                    whatsapp (wassam)      2       42.0        0.0\n59054:      ZA                                                            yes, and?      2       30.5       84.0\n\n# Forma 3\n\npop_rank_per_year %&gt;% \n  melt(., measure.vars = measure(var=as.factor, year=as.integer, sep=\".\"), value.name = \"mean\")\n\n        country                                                                 name        var  year  mean\n         &lt;char&gt;                                                               &lt;char&gt;     &lt;fctr&gt; &lt;int&gt; &lt;num&gt;\n     1:      AE                        \"\"Slut!\"\" (Taylor's Version) (From The Vault) daily_rank  2023  28.7\n     2:      AE                                         (It Goes Like) Nanana - Edit daily_rank  2023   NaN\n     3:      AE                                                            100 Bands daily_rank  2023   NaN\n     4:      AE                                                                   22 daily_rank  2023   NaN\n     5:      AE                                                               3 Days daily_rank  2023   NaN\n    ---                                                                                                    \n118104:      ZA uKhome Lotto (feat. Agzo, Optimist Music ZA, Seun1401 & El.Stephano) popularity  2024  55.3\n118105:      ZA                        uLala Kanjani (feat. LeeMcKrazy & Skandisoul) popularity  2024   NaN\n118106:      ZA                             we can't be friends (wait for your love) popularity  2024  91.5\n118107:      ZA                                                    whatsapp (wassam) popularity  2024   0.0\n118108:      ZA                                                            yes, and? popularity  2024  84.0"
  },
  {
    "objectID": "tema4.html",
    "href": "tema4.html",
    "title": "Modificación de columnas",
    "section": "",
    "text": "data.table nos permite efectuar operaciones sobre las columnas, por ejemplo, contar cuántas coincidencias tenemos para nuestros criterios aplicados.\n\ndata[country == \"MX\" & acousticness &gt; 0.5, length(spotify_id)]\n\n[1] 2395\n\ndata[country == \"MX\" & acousticness &gt; 0.5, .N]\n\n[1] 2395\n\n\nExisten símbolos especiales como .N que nos cuenta el número de observaciones que cumplen nuestros criterios para el número de grupos que hemos definido. En este caso todas las observaciones pertenecen al mismo grupo.\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nPregunta: ¿Cuántas canciones que se hayan publicado de antes del 2000 han estado dentro del top 50? (Utiliza .N)\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n[1] 6430\n\n\n\n\n\nPor ejemplo si quisieramos saber el promedio de duración en minutos de las canciones\n\ndata[, duration_ms/1000/60] %&gt;% mean()\n\n[1] 3.207851\n\ndata[,mean(duration_ms/1000/60)]\n\n[1] 3.207851\n\n\nAdemás podemos combinar filtros sobre las filas y acciones sobre las columnas. Por ejemplo, si queremos calcular el promedio de popularidad de las canciones en el top 50 de México. Primero hacemos un filtro de las canciones populares en México y después obtenemos el promedio de popularidad únicamente de estas filas.\n\n\nNota: La popularidad de una canción es un valor entre 0 y 100, donde 100 indica la mayor popularidad. La popularidad se calcula mediante un algoritmo y se basa, en su mayoría, en el número total de reproducciones que ha tenido la canción y en cuán recientes han sido esas reproducciones. En términos generales, las canciones que se reproducen mucho actualmente tendrán una popularidad mayor que las canciones que se reprodujeron mucho en el pasado. Las canciones duplicadas (por ejemplo, la misma canción de un sencillo y de un álbum) se califican de manera independiente. La popularidad de los artistas y los álbumes se deriva matemáticamente de la popularidad de las canciones. Nota: el valor de popularidad puede no reflejar la popularidad real en algunos días, ya que no se actualiza en tiempo real.\n\n\n\ndata[country == \"MX\", mean(popularity)]\n\n[1] 84.38275\n\n\nDebido a que tanto el filtro como la función sobre la columna están en el mismo comando, data.table sabe el total de las operaciones y puede hacer más eficiente la velocidad y el uso de la memoria cuando las ejecuta.\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nCalcula el promedio y desviación estandar en los movimientos diarios de ranking (el cambio en las clasificaciones en comparación con el día anterior) en las canciones populares de México.\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n[1] 0.4105561 4.9231557"
  },
  {
    "objectID": "tema4.html#agregar-nuevas-columnas-a-nuestro-data.table",
    "href": "tema4.html#agregar-nuevas-columnas-a-nuestro-data.table",
    "title": "Modificación de columnas",
    "section": "Agregar nuevas columnas a nuestro data.table",
    "text": "Agregar nuevas columnas a nuestro data.table\nHasta ahora estabamos aplicando funciones y obtuvimos vectores o números como resultado pero podemos utilizar el espacio j para crear nuevas columnas en nuestras tablas. Por ejemplo, podemos guardar la duración de cada canción en minutos.\n\n data[, .(duration_min = duration_ms/1000/60)]\n\n         duration_min\n                &lt;num&gt;\n      1:     4.194450\n      2:     3.506217\n      3:     2.621317\n      4:     2.924317\n      5:     2.848117\n     ---             \n1179449:     5.174833\n1179450:     2.887550\n1179451:     3.079850\n1179452:     2.992667\n1179453:     2.205983\n\n\nAhora qué sucede si queremos generar la nueva columna dentro de nuestra tabla original. Por ejemplo si estimamos la diferencia en tiempo desde que el album fue publicado y la fecha en la que apareció entre el top 50\nNota: El operador := sirve para modificar tablas guardadas en la memoria directamente (modify in place)\n\ndata[, date_dif := snapshot_date - album_release_date]\n\ndata\n\nIndex: &lt;country&gt;\n                     spotify_id                              name                     artists daily_rank daily_movement\n                         &lt;char&gt;                            &lt;char&gt;                      &lt;char&gt;      &lt;int&gt;          &lt;int&gt;\n      1: 2plbrEY59IikOBgBGLjaoe                  Die With A Smile       Lady Gaga, Bruno Mars          1              0\n      2: 6dOtVTDdiauQNBQEDOtlAB                BIRDS OF A FEATHER               Billie Eilish          2              0\n      3: 5G2f63n7IPVPPjfNIGih7Q                             Taste           Sabrina Carpenter          3              0\n      4: 2HRqTpkrJO5ggZyyK6NPWz                          Espresso           Sabrina Carpenter          4             46\n      5: 7tI8dRuH2Yc6RuoTjxo4dU                               Who                       Jimin          5              0\n     ---                                                                                                               \n1179449: 0AYt6NMyyLd0rLuvr0UkMH         Slime You Out (feat. SZA)                  Drake, SZA         46              4\n1179450: 2Gk6fi0dqt91NKvlzGsmm7 SAY MY GRACE (feat. Travis Scott)        Offset, Travis Scott         47              3\n1179451: 26b3oVLrRUaaybJulow9kz                            People                    Libianca         48              2\n1179452: 5ydjxBSUIDn26MFzU3asP4                        Rainy Days                           V         49              1\n1179453: 59NraMJsLaMCVtwXTSia8i                             Prada cassö, RAYE, D-Block Europe         50              0\n         weekly_movement country snapshot_date popularity is_explicit duration_ms           album_name\n                   &lt;int&gt;  &lt;char&gt;        &lt;IDat&gt;      &lt;int&gt;      &lt;lgcl&gt;       &lt;int&gt;               &lt;char&gt;\n      1:               0            2024-09-08         97       FALSE      251667     Die With A Smile\n      2:               0            2024-09-08        100       FALSE      210373 HIT ME HARD AND SOFT\n      3:               0            2024-09-08         94       FALSE      157279       Short n' Sweet\n      4:              46            2024-09-08         83        TRUE      175459       Short n' Sweet\n      5:               0            2024-09-08         94       FALSE      170887                 MUSE\n     ---                                                                                              \n1179449:               0      AE    2023-10-18         84        TRUE      310490     For All The Dogs\n1179450:               0      AE    2023-10-18         80        TRUE      173253           SET IT OFF\n1179451:               0      AE    2023-10-18         88       FALSE      184791               People\n1179452:               0      AE    2023-10-18         88       FALSE      179560              Layover\n1179453:               0      AE    2023-10-18         94        TRUE      132359                Prada\n         album_release_date danceability energy   key loudness  mode speechiness acousticness instrumentalness liveness\n                     &lt;IDat&gt;        &lt;num&gt;  &lt;num&gt; &lt;int&gt;    &lt;num&gt; &lt;int&gt;       &lt;num&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;\n      1:         2024-08-16        0.521  0.592     6   -7.777     0      0.0304      0.30800         0.00e+00    0.122\n      2:         2024-05-17        0.747  0.507     2  -10.171     1      0.0358      0.20000         6.08e-02    0.117\n      3:         2024-08-23        0.674  0.907     3   -4.086     1      0.0640      0.10100         0.00e+00    0.297\n      4:         2024-08-23        0.699  0.776     0   -5.282     1      0.0293      0.13100         5.36e-06    0.205\n      5:         2024-07-19        0.660  0.756     0   -3.743     0      0.0320      0.00289         0.00e+00    0.193\n     ---                                                                                                               \n1179449:         2023-10-06        0.483  0.408     5   -9.243     0      0.0502      0.50800         0.00e+00    0.259\n1179450:         2023-10-13        0.773  0.635    10   -5.060     1      0.0452      0.05850         0.00e+00    0.132\n1179451:         2022-12-06        0.573  0.422    10   -7.621     0      0.0678      0.55100         1.31e-05    0.102\n1179452:         2023-08-11        0.633  0.454     9   -8.016     0      0.0875      0.73900         0.00e+00    0.148\n1179453:         2023-08-11        0.638  0.717     8   -5.804     1      0.0375      0.00100         1.79e-06    0.113\n         valence   tempo time_signature date_dif\n           &lt;num&gt;   &lt;num&gt;          &lt;int&gt;    &lt;int&gt;\n      1:   0.535 157.969              3       23\n      2:   0.438 104.978              4      114\n      3:   0.721 112.964              4       16\n      4:   0.708 103.963              4       16\n      5:   0.838 116.034              4       51\n     ---                                        \n1179449:   0.105  88.880              3       12\n1179450:   0.476 121.879              4        5\n1179451:   0.693 124.357              5      316\n1179452:   0.282  74.828              4       68\n1179453:   0.422 141.904              4       68\n\n\nPara agregar múltiples columnas en la tabla original se utiliza la siguientes sintaxis\ndt[,`:=`(col1 = funcion, col2 = funcion)]\n\ndt[, c(\"col1\",\"col2\",\"col3\") := list(val1,val2,val3)]\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\n\nAgrega una nueva columna (year_release) a la tabla original que solo muestre el año de publicación del album de la canción\nEn un solo comando: genera una columna de diferencia entre la fecha de publicación y la fecha en la que la canción apareció en el top50. Además generar una columna de duración de la canción en minutos\n\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\nEjercicio 1\n\n\n [1] \"spotify_id\"         \"name\"               \"artists\"            \"daily_rank\"         \"daily_movement\"    \n [6] \"weekly_movement\"    \"country\"            \"snapshot_date\"      \"popularity\"         \"is_explicit\"       \n[11] \"duration_ms\"        \"album_name\"         \"album_release_date\" \"danceability\"       \"energy\"            \n[16] \"key\"                \"loudness\"           \"mode\"               \"speechiness\"        \"acousticness\"      \n[21] \"instrumentalness\"   \"liveness\"           \"valence\"            \"tempo\"              \"time_signature\"    \n[26] \"date_dif\"           \"year_release\"      \n\n\n   year_release\n         &lt;char&gt;\n1:         2024\n2:         2024\n3:         2024\n4:         2024\n5:         2024\n6:         2024\n\n\n\n\nEjercicio 2\n\n\n [1] \"spotify_id\"         \"name\"               \"artists\"            \"daily_rank\"         \"daily_movement\"    \n [6] \"weekly_movement\"    \"country\"            \"snapshot_date\"      \"popularity\"         \"is_explicit\"       \n[11] \"duration_ms\"        \"album_name\"         \"album_release_date\" \"danceability\"       \"energy\"            \n[16] \"key\"                \"loudness\"           \"mode\"               \"speechiness\"        \"acousticness\"      \n[21] \"instrumentalness\"   \"liveness\"           \"valence\"            \"tempo\"              \"time_signature\"    \n[26] \"date_dif\"           \"year_release\"       \"days_until_top50\"   \"duration_min\"      \n\n\n         days_until_top50 duration_min\n                    &lt;int&gt;        &lt;num&gt;\n      1:               23     4.194450\n      2:              114     3.506217\n      3:               16     2.621317\n      4:               16     2.924317\n      5:               51     2.848117\n     ---                              \n1179449:               12     5.174833\n1179450:                5     2.887550\n1179451:              316     3.079850\n1179452:               68     2.992667\n1179453:               68     2.205983"
  },
  {
    "objectID": "tema1.html",
    "href": "tema1.html",
    "title": "Sintaxis básica",
    "section": "",
    "text": "data.table es un objeto de R que está pensado para mantener las operaciones en uno o pocos comandos. La lógica de la sintaxis básica es la siguiente:"
  },
  {
    "objectID": "tema1.html#cheatsheet",
    "href": "tema1.html#cheatsheet",
    "title": "Sintaxis básica",
    "section": "Cheatsheet",
    "text": "Cheatsheet"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "tema6.html",
    "href": "tema6.html",
    "title": "Ejercicios",
    "section": "",
    "text": "Ejercicio 1\nEres un analista de datos en una plataforma de streaming musical. Tu jefe te ha pedido que analices las tendencias de 73 paises para contestar las siguietes preguntas:\n\n¿Cuáles son los 5 álbumes más populares y cómo ha evolucionado su popularidad promedio (medida a través del ranking de las canciones de cada album) a lo largo del tiempo (mensualmente) en nuestra plataforma de streaming? (muestralo en un gráfico)\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEjercicio 2\n2. ¿Cuáles son los 5 artistas que han mantenido una popularidad más constante a nivel internacional a lo largo del tiempo? En este caso vamos a considerar la popularidad como el número de paises en el que un artista es escuchado en el top50.\nEn particular debes:\n\nCalcular el número de países en los que la música de cada artista es popular para cada mes.\nIdentificar a los 5 mejores artistas que aparecen de manera consistente en la mayor cantidad de países durante el período de tiempo dado.\nVisualizar las tendencias de popularidad mensual de estos 5 mejores artistas, destacando el primer mes en que aparecieron en el conjunto de datos.\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEjercicio 3\n3. Se busca encontrar patrones entre las características de las canciones populares de cada pais. Por ejemplo: ¿existen diferencias entre el tipo de canciones (felices o tristes) que escuchan paises de diferentes continentes?\nNota: El archivo country.codes.csv tiene la relación entre los códigos de los paises, los nombres de los paises y el continente al que pertenecen. Puedes utilizar funciones del paquete dplyr (left_join()) para unir las tablas.\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n\n\n\nValencia promedio por pais y por continente. La valencia se define como una medida de 0.0 a 1.0 que describe la positividad musical que transmite una pista. Las pistas con alta valencia suenan más positivas (por ejemplo, felices, alegres, eufóricas), mientras que las pistas con baja valencia suenan más negativas (por ejemplo, tristes, deprimidas, enojadas).\n\n\n\n\n\n\n\n\n\n\nEjercicio 4\nA continuación se muestran las definiciones de las características de las canciones:\n\n\n\nPopularity: número total de reproducciones que ha tenido la pista y cuán recientes son esas reproducciones.\nAcousticness: Una medida de confianza de 0.0 a 1.0 sobre si la pista es acústica. Un valor de 1.0 representa alta confianza en que la pista es acústica.\nDanceability: La bailabilidad describe cuán adecuada es una pista para bailar, basada en una combinación de elementos musicales que incluyen tempo, estabilidad del ritmo, fuerza del compás y regularidad general.\nEnergy: La energía es una medida de 0.0 a 1.0 que representa una percepción de la intensidad y la actividad. Generalmente, las pistas energéticas se sienten rápidas, fuertes y ruidosas.\nInstrumentalness: Predice si una pista no contiene voces. Los sonidos como “Ooh” y “aah” se tratan como instrumentales en este contexto. Las pistas de rap o palabra hablada se consideran claramente “vocales”. Cuanto más cercano esté el valor de instrumentalidad a 1.0, mayor es la probabilidad de que la pista no contenga contenido vocal. Los valores superiores a 0.5 están destinados a representar pistas instrumentales, pero la confianza aumenta a medida que el valor se acerca a 1.0.\nLiveness: Detecta la presencia de una audiencia en la grabación. Valores más altos de vivacidad representan una mayor probabilidad de que la pista haya sido interpretada en vivo.\nLoudness: La sonoridad general de una pista en decibelios (dB). Los valores de sonoridad se promedian en toda la pista y son útiles para comparar la sonoridad relativa de las pistas. La sonoridad es la cualidad de un sonido que se correlaciona psicológicamente con la fuerza física (amplitud).\nMode: El modo indica la modalidad (mayor o menor) de una pista, el tipo de escala del cual se deriva su contenido melódico. Mayor se representa con 1 y menor con 0.\nSpeechiness: Detecta la presencia de palabras habladas en una pista. Cuanto más se asemeje la grabación exclusivamente al habla (por ejemplo, programa de entrevistas, audiolibro, poesía), más cercano estará el valor de este atributo a 1.0. Los valores superiores a 0.66 describen pistas que probablemente están compuestas completamente de palabras habladas. Los valores entre 0.33 y 0.66 describen pistas que pueden contener tanto música como habla, ya sea en secciones o superpuestas, como en el caso del rap. Los valores por debajo de 0.33 probablemente representan música u otras pistas que no contienen mucha letra.\nTempo: El tempo estimado general de una pista en pulsaciones por minuto (BPM). En terminología musical, el tempo es la velocidad o el ritmo de una pieza determinada y se deriva directamente de la duración promedio de cada pulso.\nValence: Una medida de 0.0 a 1.0 que describe la positividad musical que transmite una pista. Las pistas con alta valencia suenan más positivas (por ejemplo, felices, alegres, eufóricas), mientras que las pistas con baja valencia suenan más negativas (por ejemplo, tristes, deprimidas, enojadas).\n\n\n\n4. Utilizando las características de las canciones hipotetiza acerca del tipo de relaciones y las diferencias entre las canciones de diferentes regiones del mundo."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Introducción y recursos",
    "section": "",
    "text": "Es un paquete que extiende y hace más eficiente el data.frame de R base. De acuerdo con los creadores del paquete:\n\nLas operaciones de manipulación de datos como subconjunto, grupo, actualización, unión, etc., están inherentemente relacionadas. Mantener estas operaciones juntas permite:\n\n\n\nuna sintaxis concisa y consistente independientemente del conjunto de operaciones que desees realizar para lograr tu objetivo final.\nrealizar análisis de manera fluida sin la carga cognitiva de tener que mapear cada operación a una función particular de un conjunto potencialmente enorme de funciones disponibles antes de realizar el análisis.\noptimizar automáticamente las operaciones internamente y de manera muy efectiva, al saber precisamente los datos requeridos para cada operación, lo que lleva a un código muy rápido y eficiente en términos de memoria.\n\n\n\nEn resumen, si estás interesado en reducir enormemente el tiempo de programación y computación, entonces este paquete es para ti.\n\n\n(Vigneta de introducción a data.table)"
  },
  {
    "objectID": "index.html#qué-es-qué-ventajas-tiene",
    "href": "index.html#qué-es-qué-ventajas-tiene",
    "title": "Introducción y recursos",
    "section": "",
    "text": "Es un paquete que extiende y hace más eficiente el data.frame de R base. De acuerdo con los creadores del paquete:\n\nLas operaciones de manipulación de datos como subconjunto, grupo, actualización, unión, etc., están inherentemente relacionadas. Mantener estas operaciones juntas permite:\n\n\n\nuna sintaxis concisa y consistente independientemente del conjunto de operaciones que desees realizar para lograr tu objetivo final.\nrealizar análisis de manera fluida sin la carga cognitiva de tener que mapear cada operación a una función particular de un conjunto potencialmente enorme de funciones disponibles antes de realizar el análisis.\noptimizar automáticamente las operaciones internamente y de manera muy efectiva, al saber precisamente los datos requeridos para cada operación, lo que lleva a un código muy rápido y eficiente en términos de memoria.\n\n\n\nEn resumen, si estás interesado en reducir enormemente el tiempo de programación y computación, entonces este paquete es para ti.\n\n\n(Vigneta de introducción a data.table)"
  },
  {
    "objectID": "index.html#comparaciones-con-otros-paquetes",
    "href": "index.html#comparaciones-con-otros-paquetes",
    "title": "Introducción y recursos",
    "section": "Comparaciones con otros paquetes",
    "text": "Comparaciones con otros paquetes\nBenchmarks"
  },
  {
    "objectID": "index.html#instalación",
    "href": "index.html#instalación",
    "title": "Introducción y recursos",
    "section": "Instalación",
    "text": "Instalación\n\ninstall.packages(\"data.table\")"
  },
  {
    "objectID": "index.html#recursos",
    "href": "index.html#recursos",
    "title": "Introducción y recursos",
    "section": "Recursos",
    "text": "Recursos\n\nComunidad\n\nStackOverflow data.table\nWiki\nVignettes\nTutorial recomendado"
  },
  {
    "objectID": "tema9.html",
    "href": "tema9.html",
    "title": ".SD()",
    "section": "",
    "text": "Una herramienta muy útil en data.table es .SD. El nombre viene de .Subset Data.table y se puede pensar que es una autoreferencia a la misma tabla. Es difícil describir los usos de .SD por lo que lo haremos a través de ejemplos."
  },
  {
    "objectID": "tema9.html#sd-para-hacer-subconjuntos",
    "href": "tema9.html#sd-para-hacer-subconjuntos",
    "title": ".SD()",
    "section": "SD para hacer subconjuntos",
    "text": "SD para hacer subconjuntos\nEl uso más sencillo de .SD es la realización de subconjuntos. Un uso trivial sería generar el subconjunto de toda la tabla.\n\nidentical(data, data[ , .SD])\n\n[1] TRUE\n\n\nTambién se puede usar para hacer subconjuntos de columnas. En .SDcols se pueden especificar las columnas a las que hace referencia .SD.\n\ndata[,.SD,.SDcols = c(\"artists\",\"name\")] %&gt;% str()\n\nClasses 'data.table' and 'data.frame':  1179453 obs. of  2 variables:\n $ artists: chr  \"Lady Gaga, Bruno Mars\" \"Billie Eilish\" \"Sabrina Carpenter\" \"Sabrina Carpenter\" ...\n $ name   : chr  \"Die With A Smile\" \"BIRDS OF A FEATHER\" \"Taste\" \"Espresso\" ...\n - attr(*, \".internal.selfref\")=&lt;externalptr&gt; \n\n\nOtro ejemplo más útil: en secciones anteriores del taller les pedí que generaran un subconjunto de data que solo tuviera las variables numéricas de la tabla. Utilizando .SD lo podemos hacer fácilmente si especificamos la condición de que las columnas sean numéricas en el argumento .SDcols\n\ndata[,.SD, .SDcols = is.numeric] %&gt;% str()\n\nClasses 'data.table' and 'data.frame':  1179453 obs. of  17 variables:\n $ daily_rank      : int  1 2 3 4 5 6 7 8 9 10 ...\n $ daily_movement  : int  0 0 0 46 0 2 43 1 -2 1 ...\n $ weekly_movement : int  0 0 0 46 0 1 43 0 41 -1 ...\n $ popularity      : int  97 100 94 83 94 96 84 97 77 91 ...\n $ duration_ms     : int  251667 210373 157279 175459 170887 195824 186365 218423 190427 180304 ...\n $ danceability    : num  0.521 0.747 0.674 0.699 0.66 0.924 0.675 0.7 0.466 0.472 ...\n $ energy          : num  0.592 0.507 0.907 0.776 0.756 0.668 0.586 0.582 0.872 0.471 ...\n $ key             : int  6 2 3 0 0 11 9 11 7 10 ...\n $ loudness        : num  -7.78 -10.17 -4.09 -5.28 -3.74 ...\n $ mode            : int  0 1 1 1 0 1 1 0 1 1 ...\n $ speechiness     : num  0.0304 0.0358 0.064 0.0293 0.032 0.0469 0.0531 0.0356 0.0336 0.0603 ...\n $ acousticness    : num  0.308 0.2 0.101 0.131 0.00289 0.446 0.257 0.0502 0.0156 0.151 ...\n $ instrumentalness: num  0.00 6.08e-02 0.00 5.36e-06 0.00 5.94e-04 0.00 0.00 0.00 0.00 ...\n $ liveness        : num  0.122 0.117 0.297 0.205 0.193 0.0678 0.104 0.0881 0.121 0.14 ...\n $ valence         : num  0.535 0.438 0.721 0.708 0.838 0.787 0.621 0.785 0.806 0.219 ...\n $ tempo           : num  158 105 113 104 116 ...\n $ time_signature  : int  3 4 4 4 4 4 4 4 4 3 ...\n - attr(*, \".internal.selfref\")=&lt;externalptr&gt;"
  },
  {
    "objectID": "tema9.html#aplicar-funciones-sobre-los-subconjuntos-de-columnas",
    "href": "tema9.html#aplicar-funciones-sobre-los-subconjuntos-de-columnas",
    "title": ".SD()",
    "section": "Aplicar funciones sobre los subconjuntos de columnas",
    "text": "Aplicar funciones sobre los subconjuntos de columnas\nTambién podemos utilizar .SD para refereciar un subconjunto de columnas y aplicar funciones sobre ellas. Por ejemplo, imagina si quisieras cambiar el tipo de datos de muchas columnas fácilmente. Para este ejemplo vamos a volver a leer la tabla de las canciones populares, sin embargo, esta vez vamos a asignar a todas las columnas el tipo de datos de caracter.\n\ndata = fread(\"data/universal_top_spotify_songs.csv.gz\", colClasses = 'character')\n\nPrimero vamos a utilizar la función patterns() en .SDcols() para seleccionar las columnas que se refieren a fechas. Modificamos el tipo de datos de las columnas seleccionadas con ese patrón a fecha.\n\n\n# Cambiar el tipo de datos a las columnas de fechas \ndata[,names(.SD) := lapply(.SD,as.Date),.SDcols = patterns('_date')]\nstr(data)\n\nClasses 'data.table' and 'data.frame':  1179453 obs. of  25 variables:\n $ spotify_id        : chr  \"2plbrEY59IikOBgBGLjaoe\" \"6dOtVTDdiauQNBQEDOtlAB\" \"5G2f63n7IPVPPjfNIGih7Q\" \"2HRqTpkrJO5ggZyyK6NPWz\" ...\n $ name              : chr  \"Die With A Smile\" \"BIRDS OF A FEATHER\" \"Taste\" \"Espresso\" ...\n $ artists           : chr  \"Lady Gaga, Bruno Mars\" \"Billie Eilish\" \"Sabrina Carpenter\" \"Sabrina Carpenter\" ...\n $ daily_rank        : chr  \"1\" \"2\" \"3\" \"4\" ...\n $ daily_movement    : chr  \"0\" \"0\" \"0\" \"46\" ...\n $ weekly_movement   : chr  \"0\" \"0\" \"0\" \"46\" ...\n $ country           : chr  \"\" \"\" \"\" \"\" ...\n $ snapshot_date     : Date, format: \"2024-09-08\" \"2024-09-08\" \"2024-09-08\" \"2024-09-08\" ...\n $ popularity        : chr  \"97\" \"100\" \"94\" \"83\" ...\n $ is_explicit       : chr  \"False\" \"False\" \"False\" \"True\" ...\n $ duration_ms       : chr  \"251667\" \"210373\" \"157279\" \"175459\" ...\n $ album_name        : chr  \"Die With A Smile\" \"HIT ME HARD AND SOFT\" \"Short n' Sweet\" \"Short n' Sweet\" ...\n $ album_release_date: Date, format: \"2024-08-16\" \"2024-05-17\" \"2024-08-23\" \"2024-08-23\" ...\n $ danceability      : chr  \"0.521\" \"0.747\" \"0.674\" \"0.699\" ...\n $ energy            : chr  \"0.592\" \"0.507\" \"0.907\" \"0.776\" ...\n $ key               : chr  \"6\" \"2\" \"3\" \"0\" ...\n $ loudness          : chr  \"-7.777\" \"-10.171\" \"-4.086\" \"-5.282\" ...\n $ mode              : chr  \"0\" \"1\" \"1\" \"1\" ...\n $ speechiness       : chr  \"0.0304\" \"0.0358\" \"0.064\" \"0.0293\" ...\n $ acousticness      : chr  \"0.308\" \"0.2\" \"0.101\" \"0.131\" ...\n $ instrumentalness  : chr  \"0.0\" \"0.0608\" \"0.0\" \"5.36e-06\" ...\n $ liveness          : chr  \"0.122\" \"0.117\" \"0.297\" \"0.205\" ...\n $ valence           : chr  \"0.535\" \"0.438\" \"0.721\" \"0.708\" ...\n $ tempo             : chr  \"157.969\" \"104.978\" \"112.964\" \"103.963\" ...\n $ time_signature    : chr  \"3\" \"4\" \"4\" \"4\" ...\n - attr(*, \".internal.selfref\")=&lt;externalptr&gt; \n\n\n\n# Cambiar el tipo de datos a las columnas numéricas\nnumeric_cols &lt;- c(\"daily_rank\",\"daily_movement\",\"weekly_movement\",\"popularity\",\"duration_ms\",\"danceability\",\"energy\",\"key\",\"loudness\",\"mode\",\"speechiness\",\"acousticness\",\"instrumentalness\",\"liveness\",\"valence\",\"tempo\",\"time_signature\")\n\ndata[,names(.SD) := lapply(.SD,as.numeric), .SDcols = numeric_cols]\nstr(data)\n\nClasses 'data.table' and 'data.frame':  1179453 obs. of  25 variables:\n $ spotify_id        : chr  \"2plbrEY59IikOBgBGLjaoe\" \"6dOtVTDdiauQNBQEDOtlAB\" \"5G2f63n7IPVPPjfNIGih7Q\" \"2HRqTpkrJO5ggZyyK6NPWz\" ...\n $ name              : chr  \"Die With A Smile\" \"BIRDS OF A FEATHER\" \"Taste\" \"Espresso\" ...\n $ artists           : chr  \"Lady Gaga, Bruno Mars\" \"Billie Eilish\" \"Sabrina Carpenter\" \"Sabrina Carpenter\" ...\n $ daily_rank        : num  1 2 3 4 5 6 7 8 9 10 ...\n $ daily_movement    : num  0 0 0 46 0 2 43 1 -2 1 ...\n $ weekly_movement   : num  0 0 0 46 0 1 43 0 41 -1 ...\n $ country           : chr  \"\" \"\" \"\" \"\" ...\n $ snapshot_date     : Date, format: \"2024-09-08\" \"2024-09-08\" \"2024-09-08\" \"2024-09-08\" ...\n $ popularity        : num  97 100 94 83 94 96 84 97 77 91 ...\n $ is_explicit       : chr  \"False\" \"False\" \"False\" \"True\" ...\n $ duration_ms       : num  251667 210373 157279 175459 170887 ...\n $ album_name        : chr  \"Die With A Smile\" \"HIT ME HARD AND SOFT\" \"Short n' Sweet\" \"Short n' Sweet\" ...\n $ album_release_date: Date, format: \"2024-08-16\" \"2024-05-17\" \"2024-08-23\" \"2024-08-23\" ...\n $ danceability      : num  0.521 0.747 0.674 0.699 0.66 0.924 0.675 0.7 0.466 0.472 ...\n $ energy            : num  0.592 0.507 0.907 0.776 0.756 0.668 0.586 0.582 0.872 0.471 ...\n $ key               : num  6 2 3 0 0 11 9 11 7 10 ...\n $ loudness          : num  -7.78 -10.17 -4.09 -5.28 -3.74 ...\n $ mode              : num  0 1 1 1 0 1 1 0 1 1 ...\n $ speechiness       : num  0.0304 0.0358 0.064 0.0293 0.032 0.0469 0.0531 0.0356 0.0336 0.0603 ...\n $ acousticness      : num  0.308 0.2 0.101 0.131 0.00289 0.446 0.257 0.0502 0.0156 0.151 ...\n $ instrumentalness  : num  0.00 6.08e-02 0.00 5.36e-06 0.00 5.94e-04 0.00 0.00 0.00 0.00 ...\n $ liveness          : num  0.122 0.117 0.297 0.205 0.193 0.0678 0.104 0.0881 0.121 0.14 ...\n $ valence           : num  0.535 0.438 0.721 0.708 0.838 0.787 0.621 0.785 0.806 0.219 ...\n $ tempo             : num  158 105 113 104 116 ...\n $ time_signature    : num  3 4 4 4 4 4 4 4 4 3 ...\n - attr(*, \".internal.selfref\")=&lt;externalptr&gt;"
  },
  {
    "objectID": "tema9.html#aplicar-modelos-con-distintas-variables-explicativas-right-hand-side-rhs",
    "href": "tema9.html#aplicar-modelos-con-distintas-variables-explicativas-right-hand-side-rhs",
    "title": ".SD()",
    "section": "Aplicar modelos con distintas variables explicativas (right hand side = rhs)",
    "text": "Aplicar modelos con distintas variables explicativas (right hand side = rhs)\n\n\nnum_vars &lt;- data[,.SD, .SDcols = is.numeric] \ncolnames(num_vars)\n\n [1] \"daily_rank\"       \"daily_movement\"   \"weekly_movement\"  \"popularity\"       \"duration_ms\"      \"danceability\"    \n [7] \"energy\"           \"key\"              \"loudness\"         \"mode\"             \"speechiness\"      \"acousticness\"    \n[13] \"instrumentalness\" \"liveness\"         \"valence\"          \"tempo\"            \"time_signature\"  \n\nvars &lt;- c(\"danceability\",\"energy\",\"loudness\",\"valence\")\n\n# Queremos generar modelos para evaluar como es que diferentes variables afectan la popularidad de las canciones.\n\n\nmodels = unlist(\n  lapply(1:length(vars), combn, x = vars, simplify = FALSE),\n  recursive = FALSE\n)\n\nlms = lapply(models, function(rhs) {\n data[snapshot_date == max(snapshot_date),][, \n      .( call = paste(\"popularity ~ \",paste(rhs,collapse = \" + \")),\n         terms = c(\"Intercept\",rhs),\n         coefs = coef(lm(popularity ~ ., data = .SD)),\n         pvals = summary(lm(popularity ~ ., data = .SD))$coefficients[,4],\n         radj = summary(lm(popularity ~ ., data = .SD))$adj.r.squared), .SDcols = rhs]\n})\n\nresults &lt;- do.call(rbind,lms)\n\nresults\n\n                                                        call        terms       coefs         pvals          radj\n                                                      &lt;char&gt;       &lt;char&gt;       &lt;num&gt;         &lt;num&gt;         &lt;num&gt;\n 1:                               popularity ~  danceability    Intercept  80.7967185  0.000000e+00  0.0038409790\n 2:                               popularity ~  danceability danceability  -7.0185585  1.054422e-04  0.0038409790\n 3:                                     popularity ~  energy    Intercept  75.3984610  0.000000e+00 -0.0001964094\n 4:                                     popularity ~  energy       energy   0.8393845  5.944860e-01 -0.0001964094\n 5:                                   popularity ~  loudness    Intercept  81.1326815  0.000000e+00  0.0185124047\n 6:                                   popularity ~  loudness     loudness   0.8404004  9.094862e-17  0.0185124047\n 7:                                    popularity ~  valence    Intercept  76.4707397  0.000000e+00 -0.0001009337\n 8:                                    popularity ~  valence      valence  -0.8735183  4.267732e-01 -0.0001009337\n 9:                      popularity ~  danceability + energy    Intercept  79.8274497  0.000000e+00  0.0038830556\n10:                      popularity ~  danceability + energy danceability  -7.2866017  6.667336e-05  0.0038830556\n11:                      popularity ~  danceability + energy       energy   1.7063111  2.827648e-01  0.0038830556\n12:                    popularity ~  danceability + loudness    Intercept  87.2954408  0.000000e+00  0.0242839740\n13:                    popularity ~  danceability + loudness danceability  -8.5421084  2.094869e-06  0.0242839740\n14:                    popularity ~  danceability + loudness     loudness   0.8865057  2.081684e-18  0.0242839740\n15:                     popularity ~  danceability + valence    Intercept  80.6688428  0.000000e+00  0.0037116726\n16:                     popularity ~  danceability + valence danceability  -7.5545692  1.117191e-04  0.0037116726\n17:                     popularity ~  danceability + valence      valence   0.8598207  4.681146e-01  0.0037116726\n18:                          popularity ~  energy + loudness    Intercept  95.5444590  0.000000e+00  0.0318278066\n19:                          popularity ~  energy + loudness       energy -15.2170897  1.018161e-12  0.0318278066\n20:                          popularity ~  energy + loudness     loudness   1.5109508  7.496977e-28  0.0318278066\n21:                           popularity ~  energy + valence    Intercept  75.6821337  0.000000e+00 -0.0001632938\n22:                           popularity ~  energy + valence       energy   1.4861428  3.794880e-01 -0.0001632938\n23:                           popularity ~  energy + valence      valence  -1.2478374  2.898194e-01 -0.0001632938\n24:                         popularity ~  loudness + valence    Intercept  83.6290602  0.000000e+00  0.0207621082\n25:                         popularity ~  loudness + valence     loudness   0.9224723  1.098387e-18  0.0207621082\n26:                         popularity ~  loudness + valence      valence  -3.4472810  2.208550e-03  0.0207621082\n27:           popularity ~  danceability + energy + loudness    Intercept 100.0481692 1.430542e-314  0.0360083632\n28:           popularity ~  danceability + energy + loudness danceability  -7.3625488  4.208326e-05  0.0360083632\n29:           popularity ~  danceability + energy + loudness       energy -14.3638888  1.901093e-11  0.0360083632\n30:           popularity ~  danceability + energy + loudness     loudness   1.5130927  4.900052e-28  0.0360083632\n31:            popularity ~  danceability + energy + valence    Intercept  79.8800544  0.000000e+00  0.0036504766\n32:            popularity ~  danceability + energy + valence danceability  -7.5546944  1.117446e-04  0.0036504766\n33:            popularity ~  danceability + energy + valence       energy   1.4866175  3.784253e-01  0.0036504766\n34:            popularity ~  danceability + energy + valence      valence   0.4854107  6.998260e-01  0.0036504766\n35:          popularity ~  danceability + loudness + valence    Intercept  87.8106988  0.000000e+00  0.0245573824\n36:          popularity ~  danceability + loudness + valence danceability  -7.5322741  9.897288e-05  0.0245573824\n37:          popularity ~  danceability + loudness + valence     loudness   0.9219472  9.869172e-19  0.0245573824\n38:          popularity ~  danceability + loudness + valence      valence  -1.7175924  1.550976e-01  0.0245573824\n39:                popularity ~  energy + loudness + valence    Intercept  95.9081399  0.000000e+00  0.0319746744\n40:                popularity ~  energy + loudness + valence       energy -14.4959094  5.522847e-11  0.0319746744\n41:                popularity ~  energy + loudness + valence     loudness   1.5135831  6.128533e-28  0.0319746744\n42:                popularity ~  energy + loudness + valence      valence  -1.4453949  2.127262e-01  0.0319746744\n43: popularity ~  danceability + energy + loudness + valence    Intercept 100.0722375 4.269257e-314  0.0357573432\n44: popularity ~  danceability + energy + loudness + valence danceability  -7.5167704  9.323801e-05  0.0357573432\n45: popularity ~  danceability + energy + loudness + valence       energy -14.4853624  5.234013e-11  0.0357573432\n46: popularity ~  danceability + energy + loudness + valence     loudness   1.5126290  5.234112e-28  0.0357573432\n47: popularity ~  danceability + energy + loudness + valence      valence   0.2792770  8.216176e-01  0.0357573432\n                                                        call        terms       coefs         pvals          radj"
  },
  {
    "objectID": "tema9.html#uniones-condicionales",
    "href": "tema9.html#uniones-condicionales",
    "title": ".SD()",
    "section": "Uniones condicionales",
    "text": "Uniones condicionales\nQueremos realizar una unión entre dos tablas: Sales y Targets. La tabla Sales contiene las ventas de diferentes tiendas en fechas específicas (sale_date), mientras que la tabla Targets tiene los objetivos de ventas (target) por tienda dentro de intervalos de fechas (start_date y end_date). El objetivo es asignar el valor de target de Targets a cada venta de Sales, basado en si la fecha de venta cae dentro del intervalo de fechas correspondiente para esa tienda.\n\nSales\n\n\n\n\nstoreID\nsale_date\namount\n\n\n\n\n1\n2023-01-15\n500\n\n\n1\n2023-03-10\n750\n\n\n2\n2023-04-01\n1200\n\n\n2\n2023-02-15\n600\n\n\n\n\nTargets Table\n\n\n\n\nstoreID\nstart_date\nend_date\ntarget\n\n\n\n\n1\n2023-01-01\n2023-03-31\n600\n\n\n1\n2023-04-01\n2023-06-30\n800\n\n\n2\n2023-01-01\n2023-03-31\n1000\n\n\n2\n2023-04-01\n2023-06-30\n1200\n\n\n\n¿Cómo podemos asignar los objetivos de ventas (target) de un intervalo de fechas en la tabla Targets a las fechas de ventas específicas en la tabla Sales, asegurando que cada transacción tenga el objetivo correcto según el intervalo de fechas al que pertenece?\n\nSales &lt;- data.table(\n  storeID = c(1, 1, 2, 2),\n  sale_date = as.IDate(c(\"2023-01-15\", \"2023-03-10\", \"2023-04-01\", \"2023-02-15\")),\n  amount = c(500, 750, 1200, 600)\n)\n\nTargets &lt;- data.table(\n  storeID = c(1, 1, 2, 2),\n  start_date = as.IDate(c(\"2023-01-01\", \"2023-04-01\", \"2023-01-01\", \"2023-04-01\")),\n  end_date = as.IDate(c(\"2023-03-31\", \"2023-06-30\", \"2023-03-31\", \"2023-06-30\")),\n  target = c(600, 800, 1000, 1200)\n)\n\n# Add start_date and end_date to Sales as the same value (to use for range-based join)\nSales[, c(\"start_date\",\"end_date\"):=.(sale_date,sale_date)]\n\n# Join Sales and Targets based on storeID and date range, and assign target as team_performance\nSales[storeID %in% c(1, 2), \n      target := Targets[.SD, target, on = .(storeID, start_date &lt;= end_date, end_date &gt;= start_date)]]\n\nSales\n\nIndex: &lt;storeID&gt;\n   storeID  sale_date amount start_date   end_date target\n     &lt;num&gt;     &lt;IDat&gt;  &lt;num&gt;     &lt;IDat&gt;     &lt;IDat&gt;  &lt;num&gt;\n1:       1 2023-01-15    500 2023-01-15 2023-01-15    600\n2:       1 2023-03-10    750 2023-03-10 2023-03-10    600\n3:       2 2023-04-01   1200 2023-04-01 2023-04-01   1200\n4:       2 2023-02-15    600 2023-02-15 2023-02-15   1000"
  },
  {
    "objectID": "tema9.html#operaciones-sobre-grupos",
    "href": "tema9.html#operaciones-sobre-grupos",
    "title": ".SD()",
    "section": "Operaciones sobre grupos",
    "text": "Operaciones sobre grupos\n\nsong_freq &lt;- data[,.N, by = .(country,name)]\n\n# Que cancion tiene el mayor numero de registros por pais \nsong_freq[,.SD[which.max(N)], by = country] %&gt;% head()\n\n   country                                          name     N\n    &lt;char&gt;                                        &lt;char&gt; &lt;int&gt;\n1:                                          Cruel Summer   318\n2:      ZA                                         Paris   313\n3:      VN           Seven (feat. Latto) (Explicit Ver.)   325\n4:      VE                                      AMARGURA   320\n5:      UY                                       Tu y Yo   321\n6:      US I Remember Everything (feat. Kacey Musgraves)   318"
  },
  {
    "objectID": "tema5.html",
    "href": "tema5.html",
    "title": "Agrupación y cadenas de operaciones",
    "section": "",
    "text": "Ahora continuaremos usando el dataset de las plantas para sacar datos considerando agrupaciones. Por ejemplo podemos estimar cuántas veces aparece una canción entre las top 50.\ndata[,.N,by = name]\n\n                            name     N\n                          &lt;char&gt; &lt;int&gt;\n    1:          Die With A Smile  1145\n    2:        BIRDS OF A FEATHER  5515\n    3:                     Taste   674\n    4:                  Espresso  6972\n    5:                       Who  1965\n   ---                                \n13332:                     Tsiou     2\n13333:              Mexri Telous     2\n13334:           Virtuální drogy     2\n13335: AMBIENTE ERRADO - Ao Vivo     2\n13336:     Oficializar - Ao Vivo     2\nSe pueden usar múltiples factores en las agrupaciones. Por ejemplo, cuantas veces aparece una canción de su album particular por pais.\ntimes_song_per_album_per_country &lt;- data[,.N,by = .(album_name,name,country)]"
  },
  {
    "objectID": "tema5.html#agrupación-por-expresión",
    "href": "tema5.html#agrupación-por-expresión",
    "title": "Agrupación y cadenas de operaciones",
    "section": "Agrupación por expresión",
    "text": "Agrupación por expresión\nEl espacio by también nos permite formar los grupos directamente de una expresión. Por ejemplo, si quisieramos contar el número de canciones en cada pais que tienen una popularidad mayor a 80.\n\ndata[,.N,by = .(country,PopAbove80 = popularity &gt; 80)] %&gt;% head()\n\n   country PopAbove80     N\n    &lt;char&gt;     &lt;lgcl&gt; &lt;int&gt;\n1:               TRUE 14869\n2:              FALSE  1138\n3:      ZA      FALSE 10786\n4:      ZA       TRUE  5244\n5:      VN       TRUE  2622\n6:      VN      FALSE 13634\n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nCalcula cuántas veces una canción ha sido ranqueada como la número 1 (para cualquier pais). Muestra las 5 canciones que hayan tenido el ranking 1 más veces.\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n                           name   num1     N\n                         &lt;char&gt; &lt;lgcl&gt; &lt;int&gt;\n1:                         LUNA   TRUE  1015\n2:                          Who   TRUE   624\n3:   i like the way you kiss me   TRUE   570\n4: Si Antes Te Hubiera Conocido   TRUE   531\n5:                    La Diabla   TRUE   505"
  },
  {
    "objectID": "tema5.html#cadenas-de-operaciones",
    "href": "tema5.html#cadenas-de-operaciones",
    "title": "Agrupación y cadenas de operaciones",
    "section": "Cadenas de operaciones",
    "text": "Cadenas de operaciones\nUna función muy importante del paquete es la capacidad de encadenar operaciones en un mismo comando sin necesidad de guardar el resultado en algun objeto.\nEs una función que se puede entender de manera similar al uso del pipe %&gt;% o |&gt; en tidyverse o rbase. En data table se pueden evaluar una serie de expresiones una después de la otra escribiendolas entre corchetes de esta manera:\nDT[ ... ][ ... ][ ... ]\no de forma vertical\nDT[ ...\n   ][ ...\n     ][ ...\n       ]\nPor ejemplo, recapitulando temas anteriores ¿cómo contarías el número de paises en los que una canción ha estado en el top 50?\n\ndata[,.N, by = .(name,country)][,.(ncountry = .N), by = name]\n\n                            name ncountry\n                          &lt;char&gt;    &lt;int&gt;\n    1:          Die With A Smile       61\n    2:        BIRDS OF A FEATHER       62\n    3:                     Taste       49\n    4:                  Espresso       62\n    5:                       Who       48\n   ---                                   \n13332:                     Tsiou        1\n13333:              Mexri Telous        1\n13334:           Virtuální drogy        1\n13335: AMBIENTE ERRADO - Ao Vivo        1\n13336:     Oficializar - Ao Vivo        1\n\n\nEn realidad los corchetes consecutivos es una funcionalidad que viene desde R base. Por ejemplo, podemos seleccionar las primeras 10 filas del df data y después seleccionar las primeras dos.\n\nas.data.frame(data)[1:10,][1:2,]\n\n              spotify_id               name               artists daily_rank daily_movement weekly_movement country\n1 2plbrEY59IikOBgBGLjaoe   Die With A Smile Lady Gaga, Bruno Mars          1              0               0        \n2 6dOtVTDdiauQNBQEDOtlAB BIRDS OF A FEATHER         Billie Eilish          2              0               0        \n  snapshot_date popularity is_explicit duration_ms           album_name album_release_date danceability energy key\n1    2024-09-08         97       FALSE      251667     Die With A Smile         2024-08-16        0.521  0.592   6\n2    2024-09-08        100       FALSE      210373 HIT ME HARD AND SOFT         2024-05-17        0.747  0.507   2\n  loudness mode speechiness acousticness instrumentalness liveness valence   tempo time_signature\n1   -7.777    0      0.0304        0.308           0.0000    0.122   0.535 157.969              3\n2  -10.171    1      0.0358        0.200           0.0608    0.117   0.438 104.978              4"
  },
  {
    "objectID": "tema2.html",
    "href": "tema2.html",
    "title": "Importar y exportar datos",
    "section": "",
    "text": "Un objeto data.table se puede definir, por ejemplo:\n\nlibrary(data.table)\n\nDT = data.table(\n  ID = c(\"b\",\"b\",\"b\",\"a\",\"a\",\"c\"),\n  a = 1:6,\n  b = 7:12,\n  c = 13:18\n)\n\nDT\n\n       ID     a     b     c\n   &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;\n1:      b     1     7    13\n2:      b     2     8    14\n3:      b     3     9    15\n4:      a     4    10    16\n5:      a     5    11    17\n6:      c     6    12    18\n\n\n\n\n\n\n\n\n\nReto\n\n\n\n\n\nImaginemos que queremos crear una simulación de una base de datos de 10,000 secuencias aleatorias. La tabla que queremos va a tener dos columnas, la primera es un número identificador y la segunda una secuencia aleatoria de 100 pb de longitud. Por ejemplo, la siguiente tabla muestra las primeras 10 filas del resultado esperado.\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n      id                                                                                            sequencia\n   &lt;int&gt;                                                                                               &lt;char&gt;\n1:     1 GAGCGGACGACCCTCTTGTTTATTGTTCATCCCCGCGAGACGTAGCCGTGTCGAACTAGTTTCCAGTGCCAGTTATTGCGCTTTTGCTAGGTAGTAATTC\n2:     2 CGTTAATTCCAGCAAGAGGGAGGCATCTGTACATGATTAACACTATATCTAGAGTCACTGTCCGGGGCGTCGAAGATGCGTATCCGTCCTTATCGCGAGG\n3:     3 CTTAATAATGCGGCTGGACGATGCCGGTGGAAGTGGCCGTCGCGCACGCTGTCCGAGGGTCCGGGCTGGGACTCGTCCTCCTCCTAAGCCACGGACCACT\n4:     4 CGGCACCGGCGAGCATGTAAACGGGTTAACTCAAGCGGTGCAACCGCATATGTCCGAAACGGTGGTAAGGTGACCCACGGTCTGTAGGAACGTCCGATCC\n5:     5 ACGATTAGGCTCCCGTTTGAACACACTCACATACTCCCTACCTACTTAAACCTATCAGGAGTGCAAAGTAACCTCCCAAGGAAAGCGCGTGGAATTTCAC\n6:     6 ATAGACCCTCACAGCCCCTCTGCCCCAGACATGCTATCTTTTTCCATATCTACACTGAGTAGCGTTTCCTACACAGGCACGATACGCGTCCATCTACGCC"
  },
  {
    "objectID": "tema2.html#crear-un-objeto-data.table",
    "href": "tema2.html#crear-un-objeto-data.table",
    "title": "Importar y exportar datos",
    "section": "",
    "text": "Un objeto data.table se puede definir, por ejemplo:\n\nlibrary(data.table)\n\nDT = data.table(\n  ID = c(\"b\",\"b\",\"b\",\"a\",\"a\",\"c\"),\n  a = 1:6,\n  b = 7:12,\n  c = 13:18\n)\n\nDT\n\n       ID     a     b     c\n   &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;\n1:      b     1     7    13\n2:      b     2     8    14\n3:      b     3     9    15\n4:      a     4    10    16\n5:      a     5    11    17\n6:      c     6    12    18\n\n\n\n\n\n\n\n\n\nReto\n\n\n\n\n\nImaginemos que queremos crear una simulación de una base de datos de 10,000 secuencias aleatorias. La tabla que queremos va a tener dos columnas, la primera es un número identificador y la segunda una secuencia aleatoria de 100 pb de longitud. Por ejemplo, la siguiente tabla muestra las primeras 10 filas del resultado esperado.\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n      id                                                                                            sequencia\n   &lt;int&gt;                                                                                               &lt;char&gt;\n1:     1 GAGCGGACGACCCTCTTGTTTATTGTTCATCCCCGCGAGACGTAGCCGTGTCGAACTAGTTTCCAGTGCCAGTTATTGCGCTTTTGCTAGGTAGTAATTC\n2:     2 CGTTAATTCCAGCAAGAGGGAGGCATCTGTACATGATTAACACTATATCTAGAGTCACTGTCCGGGGCGTCGAAGATGCGTATCCGTCCTTATCGCGAGG\n3:     3 CTTAATAATGCGGCTGGACGATGCCGGTGGAAGTGGCCGTCGCGCACGCTGTCCGAGGGTCCGGGCTGGGACTCGTCCTCCTCCTAAGCCACGGACCACT\n4:     4 CGGCACCGGCGAGCATGTAAACGGGTTAACTCAAGCGGTGCAACCGCATATGTCCGAAACGGTGGTAAGGTGACCCACGGTCTGTAGGAACGTCCGATCC\n5:     5 ACGATTAGGCTCCCGTTTGAACACACTCACATACTCCCTACCTACTTAAACCTATCAGGAGTGCAAAGTAACCTCCCAAGGAAAGCGCGTGGAATTTCAC\n6:     6 ATAGACCCTCACAGCCCCTCTGCCCCAGACATGCTATCTTTTTCCATATCTACACTGAGTAGCGTTTCCTACACAGGCACGATACGCGTCCATCTACGCC"
  },
  {
    "objectID": "tema2.html#importar-y-exportar-datos-de-archivos",
    "href": "tema2.html#importar-y-exportar-datos-de-archivos",
    "title": "Importar y exportar datos",
    "section": "Importar y exportar datos de archivos",
    "text": "Importar y exportar datos de archivos\nLas funciones para importar y exportar son: fread y fwrite\nTienen las siguientes opciones principales, por ejemplo:\n\nfile: ruta del archivo.\nsep: el delimitador entre columnas.\n\nNota: La función tiene muchos argumentos que pueden ayudarte a personalizar el proceso de cargar datos en R.\nfread(input, file, text, cmd, sep=\"auto\", sep2=\"auto\", dec=\".\", quote=\"\\\"\",\n     nrows=Inf, header=\"auto\",\n     na.strings=getOption(\"datatable.na.strings\",\"NA\"),  # due to change to \"\"; see NEWS\n     stringsAsFactors=FALSE, verbose=getOption(\"datatable.verbose\", FALSE),\n     skip=\"__auto__\", select=NULL, drop=NULL, colClasses=NULL,\n     integer64=getOption(\"datatable.integer64\", \"integer64\"),\n     col.names,\n     check.names=FALSE, encoding=\"unknown\",\n     strip.white=TRUE, fill=FALSE, blank.lines.skip=FALSE,\n     key=NULL, index=NULL,\n     showProgress=getOption(\"datatable.showProgress\", interactive()),\n     data.table=getOption(\"datatable.fread.datatable\", TRUE),\n     nThread=getDTthreads(verbose),\n     logical01=getOption(\"datatable.logical01\", FALSE),  # due to change to TRUE; see NEWS\n     keepLeadingZeros = getOption(\"datatable.keepLeadingZeros\", FALSE),\n     yaml=FALSE, autostart=NA, tmpdir=tempdir(), tz=\"UTC\"\n     )\n     \nfwrite(x, file = \"\", append = FALSE, quote = \"auto\",\n  sep=getOption(\"datatable.fwrite.sep\", \",\"),\n  sep2 = c(\"\",\"|\",\"\"),\n  eol = if (.Platform$OS.type==\"windows\") \"\\r\\n\" else \"\\n\",\n  na = \"\", dec = \".\", row.names = FALSE, col.names = TRUE,\n  qmethod = c(\"double\",\"escape\"),\n  logical01 = getOption(\"datatable.logical01\", FALSE),  # due to change to TRUE; see NEWS\n  logicalAsInt = logical01,  # deprecated\n  scipen = getOption('scipen', 0L),\n  dateTimeAs = c(\"ISO\",\"squash\",\"epoch\",\"write.csv\"),\n  buffMB = 8L, nThread = getDTthreads(verbose),\n  showProgress = getOption(\"datatable.showProgress\", interactive()),\n  compress = c(\"auto\", \"none\", \"gzip\"),\n  yaml = FALSE,\n  bom = FALSE,\n  verbose = getOption(\"datatable.verbose\", FALSE),\n  encoding = \"\")\n\nConjunto de datos\nMuchos de los ejemplos de este curso los haremos utilizando la tabla de las 50 mejores canciones para 73 paises de acuerdo a Spotify. La tabla la pueden descargar en kaggle y se actualiza todos los días. La tabla que yo utilicé para este curso fue descargada el 8 de septiembre 2024. La tabla:\n\nTiene 25 columnas y 1,179,453 registros de canciones\nTiene registros desde el 2023-10-18 al 2024-09-08\nPesa 279 MB.\n\nNota: Recuerda que fread() también permite leer archivos comprimidos .gz\n\nfread(\"data/universal_top_spotify_songs.csv.gz\") |&gt; head() |&gt; knitr::kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nspotify_id\nname\nartists\ndaily_rank\ndaily_movement\nweekly_movement\ncountry\nsnapshot_date\npopularity\nis_explicit\nduration_ms\nalbum_name\nalbum_release_date\ndanceability\nenergy\nkey\nloudness\nmode\nspeechiness\nacousticness\ninstrumentalness\nliveness\nvalence\ntempo\ntime_signature\n\n\n\n\n2plbrEY59IikOBgBGLjaoe\nDie With A Smile\nLady Gaga, Bruno Mars\n1\n0\n0\n\n2024-09-08\n97\nFALSE\n251667\nDie With A Smile\n2024-08-16\n0.521\n0.592\n6\n-7.777\n0\n0.0304\n0.30800\n0.00e+00\n0.1220\n0.535\n157.969\n3\n\n\n6dOtVTDdiauQNBQEDOtlAB\nBIRDS OF A FEATHER\nBillie Eilish\n2\n0\n0\n\n2024-09-08\n100\nFALSE\n210373\nHIT ME HARD AND SOFT\n2024-05-17\n0.747\n0.507\n2\n-10.171\n1\n0.0358\n0.20000\n6.08e-02\n0.1170\n0.438\n104.978\n4\n\n\n5G2f63n7IPVPPjfNIGih7Q\nTaste\nSabrina Carpenter\n3\n0\n0\n\n2024-09-08\n94\nFALSE\n157279\nShort n’ Sweet\n2024-08-23\n0.674\n0.907\n3\n-4.086\n1\n0.0640\n0.10100\n0.00e+00\n0.2970\n0.721\n112.964\n4\n\n\n2HRqTpkrJO5ggZyyK6NPWz\nEspresso\nSabrina Carpenter\n4\n46\n46\n\n2024-09-08\n83\nTRUE\n175459\nShort n’ Sweet\n2024-08-23\n0.699\n0.776\n0\n-5.282\n1\n0.0293\n0.13100\n5.40e-06\n0.2050\n0.708\n103.963\n4\n\n\n7tI8dRuH2Yc6RuoTjxo4dU\nWho\nJimin\n5\n0\n0\n\n2024-09-08\n94\nFALSE\n170887\nMUSE\n2024-07-19\n0.660\n0.756\n0\n-3.743\n0\n0.0320\n0.00289\n0.00e+00\n0.1930\n0.838\n116.034\n4\n\n\n6WatFBLVB0x077xWeoVc2k\nSi Antes Te Hubiera Conocido\nKAROL G\n6\n2\n1\n\n2024-09-08\n96\nFALSE\n195824\nSi Antes Te Hubiera Conocido\n2024-06-21\n0.924\n0.668\n11\n-6.795\n1\n0.0469\n0.44600\n5.94e-04\n0.0678\n0.787\n128.027\n4\n\n\n\n\n\n\n\n\n\n\n\n\nReto\n\n\n\n\n\nUtiliza el código anterior para cargar la tabla de canciones en tu computadora.\nNota: Si quieres experimentar con tablas más grandes en la página de Kaggle hay muchas opciones. Por ejemplo: Spotify Charts que contiene las publicaciones de Top 200 y Top 50 globales desde 1 de enero 2017 (pesa 3.5 GB) y tiene 9 columnas."
  },
  {
    "objectID": "tema2.html#exportar",
    "href": "tema2.html#exportar",
    "title": "Importar y exportar datos",
    "section": "Exportar",
    "text": "Exportar\ndata.table también tiene una función optimizada para escribir los datos con los que estamos trabajando en forma de archivo. Los argumentos básicos son:\n\nx = objeto que se quiere exportar como archivo\nfile = nombre del archivo\nsep = caracter que se quiere utilizar como delimitador de campo\ncompress = debido a que podríamos estar trabajando con tablas de datos muy grandes podemos escribir los archivos comprimidos. Se puede especificar “gzip” o “auto” y utilizar la extension .gz en el nombre del archivo para escribir un archivo comprimido, la opción “none” nos permite escribir archivos sin comprimir.\n\nEjemplo: podemos escribir la tabla DT que creamos al principio de la sección:\nfwrite(DT, \"data/testDT.csv\", sep = \",\")\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nExporta la tabla de canciones como un archivo comprimido.\n\n\n\n\n\n\n\n\n\nRespuesta"
  },
  {
    "objectID": "tema2.html#velocidad-dplyr-vs-data.table",
    "href": "tema2.html#velocidad-dplyr-vs-data.table",
    "title": "Importar y exportar datos",
    "section": "Velocidad dplyr vs data.table",
    "text": "Velocidad dplyr vs data.table\nA continuación se muestra la comparación de un ejemplo de lectura de una tabla de 3062756 filas y 50 columnas utilizando la función de R base read.csv y fread.\n\nlibrary(rbenchmark)\n\ntest = benchmark(\"r base\" = {\n            read.csv(\"big_data/plantae_mexico_conCoords_specimen.csv\")\n          },\n          \"data.table\" = {\n            fread(\"big_data/plantae_mexico_conCoords_specimen.csv\")\n          },\n          replications = 10,\n          columns = c(\"test\", \"replications\", \"elapsed\",\n                      \"relative\", \"user.self\", \"sys.self\"))\n\n\n\n\n\nX\ntest\nreplications\nelapsed\nrelative\nuser.self\nsys.self\n\n\n\n\n2\ndata.table\n10\n110.933\n1.000\n206.818\n3.027\n\n\n1\nr base\n10\n380.665\n3.431\n376.605\n4.057\n\n\n\n\n\n\n\n\n\n\n\nReto\n\n\n\n\n\nSi quieres, puedes revisar el tiempo que te toma cargar la tabla de canciones de spotify utilizando read.csv y fread. Utiliza el comando de benchmark de la paquetería rbenchmark para contar el tiempo."
  },
  {
    "objectID": "tema2.html#data.frame---data.table",
    "href": "tema2.html#data.frame---data.table",
    "title": "Importar y exportar datos",
    "section": "data.frame - data.table",
    "text": "data.frame - data.table\nEl objeto de data.table es un objeto basado en un data.frame, por lo tanto es compatible con las funciones de R base que trabajan con data.frame.\nstr(data)\nClasses ‘data.table’ and 'data.frame':  1179453 obs. of  25 variables:\n $ spotify_id        : chr  \"2plbrEY59IikOBgBGLjaoe\" \"6dOtVTDdiauQNBQEDOtlAB\" \"5G2f63n7IPVPPjfNIGih7Q\" \"2HRqTpkrJO5ggZyyK6NPWz\" ...\n $ name              : chr  \"Die With A Smile\" \"BIRDS OF A FEATHER\" \"Taste\" \"Espresso\" ...\n $ artists           : chr  \"Lady Gaga, Bruno Mars\" \"Billie Eilish\" \"Sabrina Carpenter\" \"Sabrina Carpenter\" ...\n $ daily_rank        : int  1 2 3 4 5 6 7 8 9 10 ...\n $ daily_movement    : int  0 0 0 46 0 2 43 1 -2 1 ...\n $ weekly_movement   : int  0 0 0 46 0 1 43 0 41 -1 ...\n $ country           : chr  \"\" \"\" \"\" \"\" ...\n $ snapshot_date     : IDate, format: \"2024-09-08\" \"2024-09-08\" ...\n $ popularity        : int  97 100 94 83 94 96 84 97 77 91 ...\n $ is_explicit       : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...\n $ duration_ms       : int  251667 210373 157279 175459 170887 195824 186365 218423 190427 180304 ...\n $ album_name        : chr  \"Die With A Smile\" \"HIT ME HARD AND SOFT\" \"Short n' Sweet\" \"Short n' Sweet\" ...\n $ album_release_date: IDate, format: \"2024-08-16\" \"2024-05-17\" ...\n $ danceability      : num  0.521 0.747 0.674 0.699 0.66 0.924 0.675 0.7 0.466 0.472 ...\n $ energy            : num  0.592 0.507 0.907 0.776 0.756 0.668 0.586 0.582 0.872 0.471 ...\n $ key               : int  6 2 3 0 0 11 9 11 7 10 ...\n $ loudness          : num  -7.78 -10.17 -4.09 -5.28 -3.74 ...\n $ mode              : int  0 1 1 1 0 1 1 0 1 1 ...\n $ speechiness       : num  0.0304 0.0358 0.064 0.0293 0.032 0.0469 0.0531 0.0356 0.0336 0.0603 ...\n $ acousticness      : num  0.308 0.2 0.101 0.131 0.00289 0.446 0.257 0.0502 0.0156 0.151 ...\n $ instrumentalness  : num  0.00 6.08e-02 0.00 5.36e-06 0.00 5.94e-04 0.00 0.00 0.00 0.00 ...\n $ liveness          : num  0.122 0.117 0.297 0.205 0.193 0.0678 0.104 0.0881 0.121 0.14 ...\n $ valence           : num  0.535 0.438 0.721 0.708 0.838 0.787 0.621 0.785 0.806 0.219 ...\n $ tempo             : num  158 105 113 104 116 ...\n $ time_signature    : int  3 4 4 4 4 4 4 4 4 3 ...\n - attr(*, \".internal.selfref\")=&lt;externalptr&gt; \n\nSin embargo, los objetos se pueden cambiar de clase utilizando as.data.frame y setDF para convertir a data frame o as.data.table y setDT para convertir a data.table. Por ejemplo:\n\nlibrary(magrittr)\n\n# Recuerda que DT es el objeto data.table que definimos al principio de la lección\n\nas.data.frame(DT) %&gt;% class()\n\n[1] \"data.frame\"\n\nas.data.frame(DT) %&gt;% as.data.table() %&gt;% class()\n\n[1] \"data.table\" \"data.frame\"\n\nas.data.frame(DT) %&gt;% setDT(DT) %&gt;% class()\n\n[1] \"data.table\" \"data.frame\"\n\n\nLa diferencia entre las funciones set y las funciones as. es que la primera modifica directamente la tabla de referencia guardada en la memoria (no genera una copia) mientras que la segunda genera una nueva copia del objeto."
  },
  {
    "objectID": "tema7.html",
    "href": "tema7.html",
    "title": "Uniones entre tablas",
    "section": "",
    "text": "Hay dos formas de escribir uniones entre tablas usando data.table. La primera es mediante la función merge() de r base. Los argumentos básicos de esta función son:\nmerge(x, y, by = intersect(names(x), names(y)),\n      by.x = by, by.y = by, all = FALSE, all.x = all, all.y = all,\n      sort = TRUE, suffixes = c(\".x\",\".y\"), no.dups = TRUE,\n      incomparables = NULL, ...)\n\nx, y = son los objetos data.table que se quieren unir\nby, by.x, by.y = nombres de las columnas que funcionan como índice para hacer la unión. Cuando ambas tablas tienen el mismo nombre de columna se utiliza by, cuando no, se puede especificar el nombre en x (by.x) y el nombre en y (by.y)\nall, all.x, all.y = especifican el tipo de unión. all = T es para hacer full join (mantiene todas las filas de ambas tablas), all.x = T es para hacer left join (mantiene todas las filas de la tabla x), all.y es para hacer right join (mantiene todas las filas de y), all = F es para hacer inner join (solo mantiene las filas que están en ambas tablas)\n\nlibrary(data.table)\n\ndt1 = data.table(id = seq(1,10), letter1 = LETTERS[sample(1:10, replace = T)])\n\ndt2 = data.table(id = seq(6,15), letter2 = LETTERS[sample(1:10, replace = T)])\n\ndt1\n\n       id letter1\n    &lt;int&gt;  &lt;char&gt;\n 1:     1       J\n 2:     2       B\n 3:     3       D\n 4:     4       I\n 5:     5       F\n 6:     6       E\n 7:     7       B\n 8:     8       J\n 9:     9       A\n10:    10       B\n\ndt2\n\n       id letter2\n    &lt;int&gt;  &lt;char&gt;\n 1:     6       C\n 2:     7       H\n 3:     8       C\n 4:     9       I\n 5:    10       D\n 6:    11       G\n 7:    12       G\n 8:    13       I\n 9:    14       D\n10:    15       A\n\n# inner join\nmerge(dt1,dt2,by = \"id\")\n\nKey: &lt;id&gt;\n      id letter1 letter2\n   &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n1:     6       E       C\n2:     7       B       H\n3:     8       J       C\n4:     9       A       I\n5:    10       B       D\n\n# left join\nmerge(dt1,dt2,by = \"id\", all.x = T)\n\nKey: &lt;id&gt;\n       id letter1 letter2\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     1       J    &lt;NA&gt;\n 2:     2       B    &lt;NA&gt;\n 3:     3       D    &lt;NA&gt;\n 4:     4       I    &lt;NA&gt;\n 5:     5       F    &lt;NA&gt;\n 6:     6       E       C\n 7:     7       B       H\n 8:     8       J       C\n 9:     9       A       I\n10:    10       B       D\n\n# right join\nmerge(dt1,dt2,by = \"id\", all.y = T)\n\nKey: &lt;id&gt;\n       id letter1 letter2\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     6       E       C\n 2:     7       B       H\n 3:     8       J       C\n 4:     9       A       I\n 5:    10       B       D\n 6:    11    &lt;NA&gt;       G\n 7:    12    &lt;NA&gt;       G\n 8:    13    &lt;NA&gt;       I\n 9:    14    &lt;NA&gt;       D\n10:    15    &lt;NA&gt;       A\n\n# full join\nmerge(dt1,dt2,by = \"id\", all = T)\n\nKey: &lt;id&gt;\n       id letter1 letter2\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     1       J    &lt;NA&gt;\n 2:     2       B    &lt;NA&gt;\n 3:     3       D    &lt;NA&gt;\n 4:     4       I    &lt;NA&gt;\n 5:     5       F    &lt;NA&gt;\n 6:     6       E       C\n 7:     7       B       H\n 8:     8       J       C\n 9:     9       A       I\n10:    10       B       D\n11:    11    &lt;NA&gt;       G\n12:    12    &lt;NA&gt;       G\n13:    13    &lt;NA&gt;       I\n14:    14    &lt;NA&gt;       D\n15:    15    &lt;NA&gt;       A"
  },
  {
    "objectID": "tema7.html#función-merge",
    "href": "tema7.html#función-merge",
    "title": "Uniones entre tablas",
    "section": "",
    "text": "Hay dos formas de escribir uniones entre tablas usando data.table. La primera es mediante la función merge() de r base. Los argumentos básicos de esta función son:\nmerge(x, y, by = intersect(names(x), names(y)),\n      by.x = by, by.y = by, all = FALSE, all.x = all, all.y = all,\n      sort = TRUE, suffixes = c(\".x\",\".y\"), no.dups = TRUE,\n      incomparables = NULL, ...)\n\nx, y = son los objetos data.table que se quieren unir\nby, by.x, by.y = nombres de las columnas que funcionan como índice para hacer la unión. Cuando ambas tablas tienen el mismo nombre de columna se utiliza by, cuando no, se puede especificar el nombre en x (by.x) y el nombre en y (by.y)\nall, all.x, all.y = especifican el tipo de unión. all = T es para hacer full join (mantiene todas las filas de ambas tablas), all.x = T es para hacer left join (mantiene todas las filas de la tabla x), all.y es para hacer right join (mantiene todas las filas de y), all = F es para hacer inner join (solo mantiene las filas que están en ambas tablas)\n\nlibrary(data.table)\n\ndt1 = data.table(id = seq(1,10), letter1 = LETTERS[sample(1:10, replace = T)])\n\ndt2 = data.table(id = seq(6,15), letter2 = LETTERS[sample(1:10, replace = T)])\n\ndt1\n\n       id letter1\n    &lt;int&gt;  &lt;char&gt;\n 1:     1       J\n 2:     2       B\n 3:     3       D\n 4:     4       I\n 5:     5       F\n 6:     6       E\n 7:     7       B\n 8:     8       J\n 9:     9       A\n10:    10       B\n\ndt2\n\n       id letter2\n    &lt;int&gt;  &lt;char&gt;\n 1:     6       C\n 2:     7       H\n 3:     8       C\n 4:     9       I\n 5:    10       D\n 6:    11       G\n 7:    12       G\n 8:    13       I\n 9:    14       D\n10:    15       A\n\n# inner join\nmerge(dt1,dt2,by = \"id\")\n\nKey: &lt;id&gt;\n      id letter1 letter2\n   &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n1:     6       E       C\n2:     7       B       H\n3:     8       J       C\n4:     9       A       I\n5:    10       B       D\n\n# left join\nmerge(dt1,dt2,by = \"id\", all.x = T)\n\nKey: &lt;id&gt;\n       id letter1 letter2\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     1       J    &lt;NA&gt;\n 2:     2       B    &lt;NA&gt;\n 3:     3       D    &lt;NA&gt;\n 4:     4       I    &lt;NA&gt;\n 5:     5       F    &lt;NA&gt;\n 6:     6       E       C\n 7:     7       B       H\n 8:     8       J       C\n 9:     9       A       I\n10:    10       B       D\n\n# right join\nmerge(dt1,dt2,by = \"id\", all.y = T)\n\nKey: &lt;id&gt;\n       id letter1 letter2\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     6       E       C\n 2:     7       B       H\n 3:     8       J       C\n 4:     9       A       I\n 5:    10       B       D\n 6:    11    &lt;NA&gt;       G\n 7:    12    &lt;NA&gt;       G\n 8:    13    &lt;NA&gt;       I\n 9:    14    &lt;NA&gt;       D\n10:    15    &lt;NA&gt;       A\n\n# full join\nmerge(dt1,dt2,by = \"id\", all = T)\n\nKey: &lt;id&gt;\n       id letter1 letter2\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     1       J    &lt;NA&gt;\n 2:     2       B    &lt;NA&gt;\n 3:     3       D    &lt;NA&gt;\n 4:     4       I    &lt;NA&gt;\n 5:     5       F    &lt;NA&gt;\n 6:     6       E       C\n 7:     7       B       H\n 8:     8       J       C\n 9:     9       A       I\n10:    10       B       D\n11:    11    &lt;NA&gt;       G\n12:    12    &lt;NA&gt;       G\n13:    13    &lt;NA&gt;       I\n14:    14    &lt;NA&gt;       D\n15:    15    &lt;NA&gt;       A"
  },
  {
    "objectID": "tema7.html#sintaxis-de-data.table",
    "href": "tema7.html#sintaxis-de-data.table",
    "title": "Uniones entre tablas",
    "section": "Sintaxis de data.table",
    "text": "Sintaxis de data.table\nLa segunda forma de hacer uniones entre tablas es usando la sintaxis de data.table.\nDT1[DT2, nomatch = 0]\nSi lo traducimos a la sintaxis de la función anterior entonces la tabla que está por fuera es x, la tabla que está por dentro es y y el argumento nomatch te permite indicar qué hacer con las claves para las que no encuentra coincidencia en ambas tablas. Cuando nomatch = 0 no incluye las claves que no se comparten entre tablas.\n\n# inner join\ndt1[dt2, on = \"id\", nomatch=0]\n\n      id letter1 letter2\n   &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n1:     6       E       C\n2:     7       B       H\n3:     8       J       C\n4:     9       A       I\n5:    10       B       D\n\n# left join\ndt1[dt2, on = \"id\"]\n\n       id letter1 letter2\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     6       E       C\n 2:     7       B       H\n 3:     8       J       C\n 4:     9       A       I\n 5:    10       B       D\n 6:    11    &lt;NA&gt;       G\n 7:    12    &lt;NA&gt;       G\n 8:    13    &lt;NA&gt;       I\n 9:    14    &lt;NA&gt;       D\n10:    15    &lt;NA&gt;       A\n\n# right join\ndt2[dt1, on = \"id\"]\n\n       id letter2 letter1\n    &lt;int&gt;  &lt;char&gt;  &lt;char&gt;\n 1:     1    &lt;NA&gt;       J\n 2:     2    &lt;NA&gt;       B\n 3:     3    &lt;NA&gt;       D\n 4:     4    &lt;NA&gt;       I\n 5:     5    &lt;NA&gt;       F\n 6:     6       C       E\n 7:     7       H       B\n 8:     8       C       J\n 9:     9       I       A\n10:    10       D       B"
  },
  {
    "objectID": "tema7.html#ejercicio",
    "href": "tema7.html#ejercicio",
    "title": "Uniones entre tablas",
    "section": "Ejercicio",
    "text": "Ejercicio\nPara el siguiente ejercicio vamos a cargar varias tablas. Representan la información de muchas canciones de Spotify. A diferencia de la tabla que hemos estado utilizando estas canciones son de musica electrónica de la compañía Beatport. Las tablas fueron descargadas de la siguiente página\nLas tablas se relacionan de la siguiente manera:\n\nNota: El objeto de tracks tiene 10M+ de filas, pesa 2.6 GB cuando está cargado en memoria. Si tu computadora tiene poca memoria puedes elegir no juntar todos los archivos de las canciones (por ejemplo tracks &lt;- do.call(rbind,data_files[5:6]) para solo cargar dos de los 4 archivos)\n\n# Enlistar los archivos de canciones (guardados en la carpeta de tracks)\ntracks &lt;- list.files(\"data/bd/tracks\", full.names = T)\n\n# Enlistar los archivos restantes en la carpeta bd\nfiles &lt;- c(list.files(\"data/bd\", full.names = T, pattern = \".csv*\"), tracks)\n\n# Leer los archivos usando fread\ndata_files &lt;- lapply(files,fread)\nnames(data_files) &lt;- c(list.files(\"data/bd\", pattern = \".csv*\"), list.files(\"data/bd/tracks\"))\n\n# Guardar los datos en objetos diferentes\ngenre &lt;- data_files$bp_genre.csv\nsubgenre &lt;- data_files$bp_subgenre.csv\nartist &lt;- data_files$bp_artist.csv.gz\nartist_track &lt;- data_files$bp_artist_track.csv.gz\ntracks &lt;- do.call(rbind,data_files[5:8])\n\n# Borrar la lista de archivos\nrm(data_files)\n\nNos gustaría explorar la distribución de canciones de diferentes géneros a lo largo del tiempo. Para esto primero tenemos que unir las tablas tracks, genre y subgenre. En el diagrama puedes ver las columnas que las unen.\n\n\nCode\n# Union de tablas\ntracks_genre &lt;- merge(tracks,genre[,.(genre_id,genre_name)],by = \"genre_id\", all.x = T) \n\n# Visualiza el número de canciones por genero que se publicaron cada año (release_date) del 2000 al 2024\n\nfreq_tracks &lt;- tracks_genre[,.N,by = .(genre_name, Yr = format(release_date,\"%Y\"))]\n\n# Opcional: \nlabels &lt;- freq_tracks[, .SD[which.max(N)], by = genre_name][order(-N)][1:5]\n\ncolors &lt;- c(\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\", \"#9467bd\", \"gray\")\nnames(colors) &lt;- c(labels$genre_name, \"other\")\n\nfreq_tracks[,color := ifelse(genre_name %in% labels$genre_name, genre_name, \"other\")] \n\nfreq_tracks %&gt;% \n      ggplot(aes(x = as.numeric(Yr), y = N, group = genre_name))+\n      geom_line(color = \"gray\", size = 1, alpha = 0.8)+\n      geom_line(data = freq_tracks[genre_name %in% labels$genre_name], aes(color = factor(color, levels = c(labels$genre_name, \"other\"))), size = 2)+\n      geom_text_repel(data = labels, aes(label = genre_name, color = factor(genre_name, levels = c(labels$genre_name, \"other\"))), nudge_y= 500)+\n      scale_color_manual(values = colors)+\n      scale_x_continuous(limits = c(2000,2025))+\n      labs(x = \"Year\", y = \"N songs\", color = \"Subgenre\")+\n      theme_bw()\n\n\n\n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nGenera una gráfica similar en la que muestres la distribución de los 5 subgéneros con más canciones en el tiempo.\n\n\n\n\n\n\n\n\n\nRespuesta"
  },
  {
    "objectID": "tema3.html",
    "href": "tema3.html",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "Similar a como se seleccionan filas en un data.frame, en un objeto data.table se pueden seleccionar filas utilizando rangos de índices. En los siguientes dos ejemplos se muestra como seleccionar las primeras dos filas de la tabla de registros.\nlibrary(data.table)\n\ndata &lt;- fread(\"data/universal_top_spotify_songs.csv\")\n\ndata[1:2,] \n\n               spotify_id               name               artists daily_rank daily_movement weekly_movement country\n                   &lt;char&gt;             &lt;char&gt;                &lt;char&gt;      &lt;int&gt;          &lt;int&gt;           &lt;int&gt;  &lt;char&gt;\n1: 2plbrEY59IikOBgBGLjaoe   Die With A Smile Lady Gaga, Bruno Mars          1              0               0        \n2: 6dOtVTDdiauQNBQEDOtlAB BIRDS OF A FEATHER         Billie Eilish          2              0               0        \n   snapshot_date popularity is_explicit duration_ms           album_name album_release_date danceability energy   key\n          &lt;IDat&gt;      &lt;int&gt;      &lt;lgcl&gt;       &lt;int&gt;               &lt;char&gt;             &lt;IDat&gt;        &lt;num&gt;  &lt;num&gt; &lt;int&gt;\n1:    2024-09-08         97       FALSE      251667     Die With A Smile         2024-08-16        0.521  0.592     6\n2:    2024-09-08        100       FALSE      210373 HIT ME HARD AND SOFT         2024-05-17        0.747  0.507     2\n   loudness  mode speechiness acousticness instrumentalness liveness valence   tempo time_signature\n      &lt;num&gt; &lt;int&gt;       &lt;num&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;   &lt;num&gt;   &lt;num&gt;          &lt;int&gt;\n1:   -7.777     0      0.0304        0.308           0.0000    0.122   0.535 157.969              3\n2:  -10.171     1      0.0358        0.200           0.0608    0.117   0.438 104.978              4\n\n\n\nNota: Cuando solo estamos seleccionando filas no es necesario incluir la coma al final.\n\ndata[1:2] \n\n               spotify_id               name               artists daily_rank daily_movement weekly_movement country\n                   &lt;char&gt;             &lt;char&gt;                &lt;char&gt;      &lt;int&gt;          &lt;int&gt;           &lt;int&gt;  &lt;char&gt;\n1: 2plbrEY59IikOBgBGLjaoe   Die With A Smile Lady Gaga, Bruno Mars          1              0               0        \n2: 6dOtVTDdiauQNBQEDOtlAB BIRDS OF A FEATHER         Billie Eilish          2              0               0        \n   snapshot_date popularity is_explicit duration_ms           album_name album_release_date danceability energy   key\n          &lt;IDat&gt;      &lt;int&gt;      &lt;lgcl&gt;       &lt;int&gt;               &lt;char&gt;             &lt;IDat&gt;        &lt;num&gt;  &lt;num&gt; &lt;int&gt;\n1:    2024-09-08         97       FALSE      251667     Die With A Smile         2024-08-16        0.521  0.592     6\n2:    2024-09-08        100       FALSE      210373 HIT ME HARD AND SOFT         2024-05-17        0.747  0.507     2\n   loudness  mode speechiness acousticness instrumentalness liveness valence   tempo time_signature\n      &lt;num&gt; &lt;int&gt;       &lt;num&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;   &lt;num&gt;   &lt;num&gt;          &lt;int&gt;\n1:   -7.777     0      0.0304        0.308           0.0000    0.122   0.535 157.969              3\n2:  -10.171     1      0.0358        0.200           0.0608    0.117   0.438 104.978              4\n\n\n\n\n\n\nDe acuerdo con la sintaxis del paquete, el espacio i es el lugar en el que se pueden realizar operaciones sobre las filas como los filtros. Por ejemplo, utilizando la tabla de canciones podríamos estar interesados en solo seleccionar aquellos registros que pertenezcan a México.\n\ndata_MX &lt;- data[country == \"MX\",] \n\ndim(data_MX)\n\n[1] 16256    25\n\n\nO podríamos estar interesadas en seleccionar solo los registros más viejos, los que fueron publicados antes del 2000.\n\ndata_MX_viejos &lt;- data[country == \"MX\" & album_release_date &lt;= 2000,]\n\ndim(data_MX_viejos)\n\n[1]  2 25\n\n\nOperadores lógicos para hacer los filtros:\n\n\n\nOperador\nComparación\nEjemplo\nResultado\n\n\n\n\nx | y\nx Ó y es verdadero\nTRUE | FALSE\nTRUE\n\n\nx & y\nx Y y son verdaderos\nTRUE & FALSE\nFALSE\n\n\n!x\nx no es verdadero (negación)\n!TRUE\nFALSE\n\n\nisTRUE(x)\nx es verdadero (afirmación)\nisTRUE(TRUE)\nTRUE\n\n\n\n\n\n\n\nOtra función que se puede realizar en el espacio de las filas es ordenarlas. Por ejemplo, podríamos ordenar la tabla de canciones de México por qué tan bailable es.\n\n# Ordenar los datos de la tabla por qué tan bailable es\n\nordered_data_MX = data_MX[order(danceability, decreasing = T)]\n\n# seleccionar la columna de danceability como vector y seleccionar los valores únicos\n# mostrar solo los primeros valores\n\nunique(ordered_data_MX$danceability) |&gt; head()\n\n[1] 0.937 0.924 0.922 0.920 0.918 0.913\n\n\n\n\n\n\n\n\nReto\n\n\n\n\n\n\nCarga el archivo de canciones utilizando la función fread que revisamos en el tema anterior\nUtiliza un filtro para quedarte con las filas que pertenezcan al pais que te interese\nOrdena de manera descendente por ranking\n\nPregunta:\n¿De qué rango de años son las 50 canciones más escuchadas?\nNota: Cuando tienes una columna de fecha con formato Año-mes-dia pero solo quieres la información de alguno de los elementos (por ejemplo el año) puedes utilizar la siguiente función: format(data_MX_ordenado$album_release_date,\"%Y\")\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n[1] \"Mexico: 1963 - 2024\""
  },
  {
    "objectID": "tema3.html#seleccionar-por-índices",
    "href": "tema3.html#seleccionar-por-índices",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "Similar a como se seleccionan filas en un data.frame, en un objeto data.table se pueden seleccionar filas utilizando rangos de índices. En los siguientes dos ejemplos se muestra como seleccionar las primeras dos filas de la tabla de registros.\nlibrary(data.table)\n\ndata &lt;- fread(\"data/universal_top_spotify_songs.csv\")\n\ndata[1:2,] \n\n               spotify_id               name               artists daily_rank daily_movement weekly_movement country\n                   &lt;char&gt;             &lt;char&gt;                &lt;char&gt;      &lt;int&gt;          &lt;int&gt;           &lt;int&gt;  &lt;char&gt;\n1: 2plbrEY59IikOBgBGLjaoe   Die With A Smile Lady Gaga, Bruno Mars          1              0               0        \n2: 6dOtVTDdiauQNBQEDOtlAB BIRDS OF A FEATHER         Billie Eilish          2              0               0        \n   snapshot_date popularity is_explicit duration_ms           album_name album_release_date danceability energy   key\n          &lt;IDat&gt;      &lt;int&gt;      &lt;lgcl&gt;       &lt;int&gt;               &lt;char&gt;             &lt;IDat&gt;        &lt;num&gt;  &lt;num&gt; &lt;int&gt;\n1:    2024-09-08         97       FALSE      251667     Die With A Smile         2024-08-16        0.521  0.592     6\n2:    2024-09-08        100       FALSE      210373 HIT ME HARD AND SOFT         2024-05-17        0.747  0.507     2\n   loudness  mode speechiness acousticness instrumentalness liveness valence   tempo time_signature\n      &lt;num&gt; &lt;int&gt;       &lt;num&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;   &lt;num&gt;   &lt;num&gt;          &lt;int&gt;\n1:   -7.777     0      0.0304        0.308           0.0000    0.122   0.535 157.969              3\n2:  -10.171     1      0.0358        0.200           0.0608    0.117   0.438 104.978              4\n\n\n\nNota: Cuando solo estamos seleccionando filas no es necesario incluir la coma al final.\n\ndata[1:2] \n\n               spotify_id               name               artists daily_rank daily_movement weekly_movement country\n                   &lt;char&gt;             &lt;char&gt;                &lt;char&gt;      &lt;int&gt;          &lt;int&gt;           &lt;int&gt;  &lt;char&gt;\n1: 2plbrEY59IikOBgBGLjaoe   Die With A Smile Lady Gaga, Bruno Mars          1              0               0        \n2: 6dOtVTDdiauQNBQEDOtlAB BIRDS OF A FEATHER         Billie Eilish          2              0               0        \n   snapshot_date popularity is_explicit duration_ms           album_name album_release_date danceability energy   key\n          &lt;IDat&gt;      &lt;int&gt;      &lt;lgcl&gt;       &lt;int&gt;               &lt;char&gt;             &lt;IDat&gt;        &lt;num&gt;  &lt;num&gt; &lt;int&gt;\n1:    2024-09-08         97       FALSE      251667     Die With A Smile         2024-08-16        0.521  0.592     6\n2:    2024-09-08        100       FALSE      210373 HIT ME HARD AND SOFT         2024-05-17        0.747  0.507     2\n   loudness  mode speechiness acousticness instrumentalness liveness valence   tempo time_signature\n      &lt;num&gt; &lt;int&gt;       &lt;num&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;   &lt;num&gt;   &lt;num&gt;          &lt;int&gt;\n1:   -7.777     0      0.0304        0.308           0.0000    0.122   0.535 157.969              3\n2:  -10.171     1      0.0358        0.200           0.0608    0.117   0.438 104.978              4"
  },
  {
    "objectID": "tema3.html#filtrar-filas",
    "href": "tema3.html#filtrar-filas",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "De acuerdo con la sintaxis del paquete, el espacio i es el lugar en el que se pueden realizar operaciones sobre las filas como los filtros. Por ejemplo, utilizando la tabla de canciones podríamos estar interesados en solo seleccionar aquellos registros que pertenezcan a México.\n\ndata_MX &lt;- data[country == \"MX\",] \n\ndim(data_MX)\n\n[1] 16256    25\n\n\nO podríamos estar interesadas en seleccionar solo los registros más viejos, los que fueron publicados antes del 2000.\n\ndata_MX_viejos &lt;- data[country == \"MX\" & album_release_date &lt;= 2000,]\n\ndim(data_MX_viejos)\n\n[1]  2 25\n\n\nOperadores lógicos para hacer los filtros:\n\n\n\nOperador\nComparación\nEjemplo\nResultado\n\n\n\n\nx | y\nx Ó y es verdadero\nTRUE | FALSE\nTRUE\n\n\nx & y\nx Y y son verdaderos\nTRUE & FALSE\nFALSE\n\n\n!x\nx no es verdadero (negación)\n!TRUE\nFALSE\n\n\nisTRUE(x)\nx es verdadero (afirmación)\nisTRUE(TRUE)\nTRUE"
  },
  {
    "objectID": "tema3.html#ordenar-filas",
    "href": "tema3.html#ordenar-filas",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "Otra función que se puede realizar en el espacio de las filas es ordenarlas. Por ejemplo, podríamos ordenar la tabla de canciones de México por qué tan bailable es.\n\n# Ordenar los datos de la tabla por qué tan bailable es\n\nordered_data_MX = data_MX[order(danceability, decreasing = T)]\n\n# seleccionar la columna de danceability como vector y seleccionar los valores únicos\n# mostrar solo los primeros valores\n\nunique(ordered_data_MX$danceability) |&gt; head()\n\n[1] 0.937 0.924 0.922 0.920 0.918 0.913\n\n\n\n\n\n\n\n\nReto\n\n\n\n\n\n\nCarga el archivo de canciones utilizando la función fread que revisamos en el tema anterior\nUtiliza un filtro para quedarte con las filas que pertenezcan al pais que te interese\nOrdena de manera descendente por ranking\n\nPregunta:\n¿De qué rango de años son las 50 canciones más escuchadas?\nNota: Cuando tienes una columna de fecha con formato Año-mes-dia pero solo quieres la información de alguno de los elementos (por ejemplo el año) puedes utilizar la siguiente función: format(data_MX_ordenado$album_release_date,\"%Y\")\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\n\n[1] \"Mexico: 1963 - 2024\""
  },
  {
    "objectID": "tema3.html#seleccionar-columnas-por-índice",
    "href": "tema3.html#seleccionar-columnas-por-índice",
    "title": "Filtros y selección de columnas",
    "section": "Seleccionar columnas por índice",
    "text": "Seleccionar columnas por índice\nDe acuerdo con la sintaxis del paquete, el espacio j nos permite realizar operaciones sobre las columnas. Una de esas operaciones es la selección de columnas.\nSe pueden seleccionar por medio de índices:\n\ndata[,c(2,3,7),]\n\n                                      name                     artists country\n                                    &lt;char&gt;                      &lt;char&gt;  &lt;char&gt;\n      1:                  Die With A Smile       Lady Gaga, Bruno Mars        \n      2:                BIRDS OF A FEATHER               Billie Eilish        \n      3:                             Taste           Sabrina Carpenter        \n      4:                          Espresso           Sabrina Carpenter        \n      5:                               Who                       Jimin        \n     ---                                                                      \n1179449:         Slime You Out (feat. SZA)                  Drake, SZA      AE\n1179450: SAY MY GRACE (feat. Travis Scott)        Offset, Travis Scott      AE\n1179451:                            People                    Libianca      AE\n1179452:                        Rainy Days                           V      AE\n1179453:                             Prada cassö, RAYE, D-Block Europe      AE"
  },
  {
    "objectID": "tema3.html#seleccionar-columnas-por-nombre",
    "href": "tema3.html#seleccionar-columnas-por-nombre",
    "title": "Filtros y selección de columnas",
    "section": "Seleccionar columnas por nombre",
    "text": "Seleccionar columnas por nombre\nSe pueden seleccionar las columas por nombre y regresar como vector:\n\ndata[,name] |&gt; head()\n\n[1] \"Die With A Smile\"             \"BIRDS OF A FEATHER\"           \"Taste\"                       \n[4] \"Espresso\"                     \"Who\"                          \"Si Antes Te Hubiera Conocido\"\n\n\nSe pueden seleccionar las columnas usando una lista y regresar como tabla:\n\ndata[,list(artists,name,album_name)]\n\n                             artists                              name           album_name\n                              &lt;char&gt;                            &lt;char&gt;               &lt;char&gt;\n      1:       Lady Gaga, Bruno Mars                  Die With A Smile     Die With A Smile\n      2:               Billie Eilish                BIRDS OF A FEATHER HIT ME HARD AND SOFT\n      3:           Sabrina Carpenter                             Taste       Short n' Sweet\n      4:           Sabrina Carpenter                          Espresso       Short n' Sweet\n      5:                       Jimin                               Who                 MUSE\n     ---                                                                                   \n1179449:                  Drake, SZA         Slime You Out (feat. SZA)     For All The Dogs\n1179450:        Offset, Travis Scott SAY MY GRACE (feat. Travis Scott)           SET IT OFF\n1179451:                    Libianca                            People               People\n1179452:                           V                        Rainy Days              Layover\n1179453: cassö, RAYE, D-Block Europe                             Prada                Prada\n\n\nUn atajo para no escribir list() es .():\n\ndata[,.(artists,name,album_name)]\n\n                             artists                              name           album_name\n                              &lt;char&gt;                            &lt;char&gt;               &lt;char&gt;\n      1:       Lady Gaga, Bruno Mars                  Die With A Smile     Die With A Smile\n      2:               Billie Eilish                BIRDS OF A FEATHER HIT ME HARD AND SOFT\n      3:           Sabrina Carpenter                             Taste       Short n' Sweet\n      4:           Sabrina Carpenter                          Espresso       Short n' Sweet\n      5:                       Jimin                               Who                 MUSE\n     ---                                                                                   \n1179449:                  Drake, SZA         Slime You Out (feat. SZA)     For All The Dogs\n1179450:        Offset, Travis Scott SAY MY GRACE (feat. Travis Scott)           SET IT OFF\n1179451:                    Libianca                            People               People\n1179452:                           V                        Rainy Days              Layover\n1179453: cassö, RAYE, D-Block Europe                             Prada                Prada\n\n\nSeleccionar columnas por rangos usando nombres:\n\ndata[,spotify_id:weekly_movement]\n\n                     spotify_id                              name                     artists daily_rank daily_movement\n                         &lt;char&gt;                            &lt;char&gt;                      &lt;char&gt;      &lt;int&gt;          &lt;int&gt;\n      1: 2plbrEY59IikOBgBGLjaoe                  Die With A Smile       Lady Gaga, Bruno Mars          1              0\n      2: 6dOtVTDdiauQNBQEDOtlAB                BIRDS OF A FEATHER               Billie Eilish          2              0\n      3: 5G2f63n7IPVPPjfNIGih7Q                             Taste           Sabrina Carpenter          3              0\n      4: 2HRqTpkrJO5ggZyyK6NPWz                          Espresso           Sabrina Carpenter          4             46\n      5: 7tI8dRuH2Yc6RuoTjxo4dU                               Who                       Jimin          5              0\n     ---                                                                                                               \n1179449: 0AYt6NMyyLd0rLuvr0UkMH         Slime You Out (feat. SZA)                  Drake, SZA         46              4\n1179450: 2Gk6fi0dqt91NKvlzGsmm7 SAY MY GRACE (feat. Travis Scott)        Offset, Travis Scott         47              3\n1179451: 26b3oVLrRUaaybJulow9kz                            People                    Libianca         48              2\n1179452: 5ydjxBSUIDn26MFzU3asP4                        Rainy Days                           V         49              1\n1179453: 59NraMJsLaMCVtwXTSia8i                             Prada cassö, RAYE, D-Block Europe         50              0\n         weekly_movement\n                   &lt;int&gt;\n      1:               0\n      2:               0\n      3:               0\n      4:              46\n      5:               0\n     ---                \n1179449:               0\n1179450:               0\n1179451:               0\n1179452:               0\n1179453:               0\n\n\nPara seleccionar columnas guardadas en una variable se puede utilizar el prefijo ..:\n\nvariables &lt;- c(\"artists\",\"name\",\"album_name\")\n\ndata[ , ..variables]\n\n                             artists                              name           album_name\n                              &lt;char&gt;                            &lt;char&gt;               &lt;char&gt;\n      1:       Lady Gaga, Bruno Mars                  Die With A Smile     Die With A Smile\n      2:               Billie Eilish                BIRDS OF A FEATHER HIT ME HARD AND SOFT\n      3:           Sabrina Carpenter                             Taste       Short n' Sweet\n      4:           Sabrina Carpenter                          Espresso       Short n' Sweet\n      5:                       Jimin                               Who                 MUSE\n     ---                                                                                   \n1179449:                  Drake, SZA         Slime You Out (feat. SZA)     For All The Dogs\n1179450:        Offset, Travis Scott SAY MY GRACE (feat. Travis Scott)           SET IT OFF\n1179451:                    Libianca                            People               People\n1179452:                           V                        Rainy Days              Layover\n1179453: cassö, RAYE, D-Block Europe                             Prada                Prada\n\n\nNota: Tanto los objetos data.frame como los data.table son listas (aun cuando las vemos como tablas). El hecho de que las operaciones realizadas en el espacio j regresen listas es muy poderoso y permite hacer operaciones más complicadas más adelante.\n\n\n\n\n\n\nReto\n\n\n\n\n\nA. Me gustaría tener un data frame en donde solo tuviera la información de las características de las canciones (por ejemplo: duración, energía, etc.)\n\nEnlista los nombres de columnas y analiza de qué tratan\nGuarda los nombres de las columnas que solo contengan información acerca las características en un objeto\nSelecciona las columnas de la tabla data usando el objeto de nombres de columnas.\n\nB. Genera un objeto data.table que tenga los registros del mes de septiembre 2024 y las columnas que describen las características de las cancions (utiliza un solo comando).\nNota: Cuando tienes una columna de fecha con formato Año-mes-dia pero solo quieres la información de algunos de los elementos (por ejemplo el año y mes) puedes utilizar la siguiente función: format(data_MX_ordenado$album_release_date,\"%Y-%m\")\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\ninfo_canciones &lt;- c(“duration_ms”, “danceability”, “energy”, “loudness”, “speechiness”, “acousticness”,“instrumentalness”,“liveness”)\n\n\n         duration_ms danceability energy loudness speechiness acousticness instrumentalness liveness\n               &lt;int&gt;        &lt;num&gt;  &lt;num&gt;    &lt;num&gt;       &lt;num&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;\n      1:      251667        0.521  0.592   -7.777      0.0304      0.30800         0.00e+00    0.122\n      2:      210373        0.747  0.507  -10.171      0.0358      0.20000         6.08e-02    0.117\n      3:      157279        0.674  0.907   -4.086      0.0640      0.10100         0.00e+00    0.297\n      4:      175459        0.699  0.776   -5.282      0.0293      0.13100         5.36e-06    0.205\n      5:      170887        0.660  0.756   -3.743      0.0320      0.00289         0.00e+00    0.193\n     ---                                                                                            \n1179449:      310490        0.483  0.408   -9.243      0.0502      0.50800         0.00e+00    0.259\n1179450:      173253        0.773  0.635   -5.060      0.0452      0.05850         0.00e+00    0.132\n1179451:      184791        0.573  0.422   -7.621      0.0678      0.55100         1.31e-05    0.102\n1179452:      179560        0.633  0.454   -8.016      0.0875      0.73900         0.00e+00    0.148\n1179453:      132359        0.638  0.717   -5.804      0.0375      0.00100         1.79e-06    0.113\n\n\n       snapshot_date duration_ms danceability energy loudness speechiness acousticness instrumentalness liveness\n              &lt;IDat&gt;       &lt;int&gt;        &lt;num&gt;  &lt;num&gt;    &lt;num&gt;       &lt;num&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;\n    1:    2024-09-08      251667        0.521  0.592   -7.777      0.0304      0.30800         0.00e+00   0.1220\n    2:    2024-09-08      210373        0.747  0.507  -10.171      0.0358      0.20000         6.08e-02   0.1170\n    3:    2024-09-08      157279        0.674  0.907   -4.086      0.0640      0.10100         0.00e+00   0.2970\n    4:    2024-09-08      175459        0.699  0.776   -5.282      0.0293      0.13100         5.36e-06   0.2050\n    5:    2024-09-08      170887        0.660  0.756   -3.743      0.0320      0.00289         0.00e+00   0.1930\n   ---                                                                                                          \n29196:    2024-09-01      140733        0.882  0.764   -5.241      0.2040      0.35900         0.00e+00   0.1190\n29197:    2024-09-01      180000        0.840  0.715   -5.141      0.1870      0.17600         0.00e+00   0.0935\n29198:    2024-09-01      241000        0.330  0.313  -10.906      0.0353      0.53600         5.70e-06   0.2770\n29199:    2024-09-01      131872        0.749  0.729   -3.190      0.0321      0.26100         0.00e+00   0.1130\n29200:    2024-09-01      151739        0.804  0.957   -5.452      0.0340      0.12500         1.74e-02   0.1140"
  },
  {
    "objectID": "tema3.html#deseleccionar-columas",
    "href": "tema3.html#deseleccionar-columas",
    "title": "Filtros y selección de columnas",
    "section": "Deseleccionar columas",
    "text": "Deseleccionar columas\nSimilar a las formas de seleccionar columnas podemos utilizar los operadores - y ! para evitar la selección de ciertas columnas o rangos de columnas.\n\ndata[,-c(\"name\",\"artists\")] %&gt;% colnames()\n\n [1] \"spotify_id\"         \"daily_rank\"         \"daily_movement\"     \"weekly_movement\"    \"country\"           \n [6] \"snapshot_date\"      \"popularity\"         \"is_explicit\"        \"duration_ms\"        \"album_name\"        \n[11] \"album_release_date\" \"danceability\"       \"energy\"             \"key\"                \"loudness\"          \n[16] \"mode\"               \"speechiness\"        \"acousticness\"       \"instrumentalness\"   \"liveness\"          \n[21] \"valence\"            \"tempo\"              \"time_signature\"    \n\ndata[,!c(\"spotify_id\")] %&gt;% colnames()\n\n [1] \"name\"               \"artists\"            \"daily_rank\"         \"daily_movement\"     \"weekly_movement\"   \n [6] \"country\"            \"snapshot_date\"      \"popularity\"         \"is_explicit\"        \"duration_ms\"       \n[11] \"album_name\"         \"album_release_date\" \"danceability\"       \"energy\"             \"key\"               \n[16] \"loudness\"           \"mode\"               \"speechiness\"        \"acousticness\"       \"instrumentalness\"  \n[21] \"liveness\"           \"valence\"            \"tempo\"              \"time_signature\"    \n\ndata[,!(key:time_signature)] %&gt;% colnames()\n\n [1] \"spotify_id\"         \"name\"               \"artists\"            \"daily_rank\"         \"daily_movement\"    \n [6] \"weekly_movement\"    \"country\"            \"snapshot_date\"      \"popularity\"         \"is_explicit\"       \n[11] \"duration_ms\"        \"album_name\"         \"album_release_date\" \"danceability\"       \"energy\""
  },
  {
    "objectID": "tema3.html#renombrar-columnas",
    "href": "tema3.html#renombrar-columnas",
    "title": "Filtros y selección de columnas",
    "section": "Renombrar columnas",
    "text": "Renombrar columnas\nEn el espacio de operaciones sobre las columnas también se pueden renombrar las columnas.\n\ndata[, .(artista = artists, song_name = name)]\n\n                             artista                         song_name\n                              &lt;char&gt;                            &lt;char&gt;\n      1:       Lady Gaga, Bruno Mars                  Die With A Smile\n      2:               Billie Eilish                BIRDS OF A FEATHER\n      3:           Sabrina Carpenter                             Taste\n      4:           Sabrina Carpenter                          Espresso\n      5:                       Jimin                               Who\n     ---                                                              \n1179449:                  Drake, SZA         Slime You Out (feat. SZA)\n1179450:        Offset, Travis Scott SAY MY GRACE (feat. Travis Scott)\n1179451:                    Libianca                            People\n1179452:                           V                        Rainy Days\n1179453: cassö, RAYE, D-Block Europe                             Prada"
  }
]