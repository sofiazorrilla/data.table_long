[
  {
    "objectID": "index.html#qué-ventajas-tiene",
    "href": "index.html#qué-ventajas-tiene",
    "title": "Introducción y recursos",
    "section": "¿Qué ventajas tiene?",
    "text": "¿Qué ventajas tiene?"
  },
  {
    "objectID": "index.html#instalación",
    "href": "index.html#instalación",
    "title": "Introducción y recursos",
    "section": "Instalación",
    "text": "Instalación\n\ninstall.packages(\"data.table\")"
  },
  {
    "objectID": "tema2.html",
    "href": "tema2.html",
    "title": "Importar y exportar datos",
    "section": "",
    "text": "Un objeto data.table se puede definir, por ejemplo:\n\nlibrary(data.table)\n\nDT = data.table(\n  ID = c(\"b\",\"b\",\"b\",\"a\",\"a\",\"c\"),\n  a = 1:6,\n  b = 7:12,\n  c = 13:18\n)\n\nDT\n\n   ID a  b  c\n1:  b 1  7 13\n2:  b 2  8 14\n3:  b 3  9 15\n4:  a 4 10 16\n5:  a 5 11 17\n6:  c 6 12 18\n\n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nImaginemos que queremos crear una simulación de una base de datos de secuencias aleatorias. La tabla que queremos al final va a tener dos columnas, la primera es un número identificador de cada secuencia y la segunda la secuencia aleatoria de tamaño 300. Por ejemplo, la siguiente tabla muestra las primeras 10 filas del resultado esperado.\n\n\n\n\n\n\n\n\n\nid\nsequencia\n\n\n\n\n1\nCATCCACTAGGGGAAGTATTAACCGTACGTACGTGCTCTCTATAAGGTTGTTGTTTCCCTCCGGTCAGATGTTATCCTGTGCCCAGTTTTTTATATTCGG\n\n\n2\nCTTTTCTTTGCACGACTGGTAAAGGACGTAGACGGTACCTTGCTCGCCGCTCTGAGTTATCAAACATTAACTTGATTGAGCGCCTCCGAGCACATGTTGC\n\n\n3\nATGCGCTCTCTCCTCCTCGATCAGTTGACCCCTATTGGCCACGCGAGTTAAGCTTTTCTCAAGACGACTCAAATCGTCTCGCTACGGATCTGTTTAATAT\n\n\n4\nTCTCAAGCACATTGTAACCAGTTACCACAACTACCTAGCCATTTTATCCCAGTAGCCGGCAGCCGGGGACGTGACCTTTTTCTTTAGATCGGGAGAAAGT\n\n\n5\nCCAGCTCCCTTGGAATATGCATGATCACAGGACTGACAACAAAAGATGGCGGAGGCGTGTAGAAAGAATGGTCATCCTAGTTCTTTGAGGGCGTAAGAGA\n\n\n6\nGCGGTTCTGCATGGTTCCCGATCAAAGCATGGAAATCCATTCGATCGCAGTCAGGCTAACCCCGTTGCGGCCACTGCACATTTGTGGTAGAAATCCCTGG\n\n\n\n\n\nEjercicio: Genera un objeto data.table en el que la primera columna sea un id de secuencia y la segunda sea una secuencia (aleatoria) de tamaño 300 caracteres\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\nsecuencias &lt;- data.table(\n                id = seq(1,10000), \n                sequencia = sapply(seq(1, 10000), function(x) paste(sample(c(\"A\", \"T\", \"C\", \"G\"), 100, replace = TRUE), collapse = \"\")))\n\nhead(secuencias)\n\n   id                                                                                            sequencia\n1:  1 TGGTTGGTTACCTAAAGAAGGTGTCCATCGGGATTTATTTGCTGGCGAGGTGGGACACAATTCAGTTTAGTGGTTCCACCAAGACTATCGTAGTAACTAC\n2:  2 CTATAGTGAACGCGGGCAGTTAGTGCGTTTCGTAGGCCAACTAATTGGAATAATCGAATAGTGAACTTCACACATTTATTCGCTCACTGTACTACTCCTT\n3:  3 CCAGGACTATCTCACATTCGCATGTACTTGGCCAACCTATCTGCTTTGACCGAGCAACGACTCACTGCCACTCGAGTCCTTACACCGTGCCCCCCTCACG\n4:  4 CCTTCCATTAAGTGATTCCCGATCACACCCCCTTACCGTCCGGGCAGCTGGGCCAATGTCATAACGGGCTGACCAGGAGCGGAGGGGTATCTCGAACCTT\n5:  5 AGCTGAGGGAACTTGCAAGTGAGATGACCTTCAAGAACCTGGCTCGGAAGGGTAACGCCGGACAGCACCGAAGGTGGACCCCCGTGATTCCTGAGGTCGC\n6:  6 ACAACCTGGTGGCTGGTATCATTCAGATCTTAACCCTGACATGAATACCAACAATGACCAAAGGGTATAAAACGTTGATTTGTGATGCAAATCGATCCCC"
  },
  {
    "objectID": "tema2.html#crear-un-objeto-data.table",
    "href": "tema2.html#crear-un-objeto-data.table",
    "title": "Importar y exportar datos",
    "section": "",
    "text": "Un objeto data.table se puede definir, por ejemplo:\n\nlibrary(data.table)\n\nDT = data.table(\n  ID = c(\"b\",\"b\",\"b\",\"a\",\"a\",\"c\"),\n  a = 1:6,\n  b = 7:12,\n  c = 13:18\n)\n\nDT\n\n   ID a  b  c\n1:  b 1  7 13\n2:  b 2  8 14\n3:  b 3  9 15\n4:  a 4 10 16\n5:  a 5 11 17\n6:  c 6 12 18\n\n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nImaginemos que queremos crear una simulación de una base de datos de secuencias aleatorias. La tabla que queremos al final va a tener dos columnas, la primera es un número identificador de cada secuencia y la segunda la secuencia aleatoria de tamaño 300. Por ejemplo, la siguiente tabla muestra las primeras 10 filas del resultado esperado.\n\n\n\n\n\n\n\n\n\nid\nsequencia\n\n\n\n\n1\nCATCCACTAGGGGAAGTATTAACCGTACGTACGTGCTCTCTATAAGGTTGTTGTTTCCCTCCGGTCAGATGTTATCCTGTGCCCAGTTTTTTATATTCGG\n\n\n2\nCTTTTCTTTGCACGACTGGTAAAGGACGTAGACGGTACCTTGCTCGCCGCTCTGAGTTATCAAACATTAACTTGATTGAGCGCCTCCGAGCACATGTTGC\n\n\n3\nATGCGCTCTCTCCTCCTCGATCAGTTGACCCCTATTGGCCACGCGAGTTAAGCTTTTCTCAAGACGACTCAAATCGTCTCGCTACGGATCTGTTTAATAT\n\n\n4\nTCTCAAGCACATTGTAACCAGTTACCACAACTACCTAGCCATTTTATCCCAGTAGCCGGCAGCCGGGGACGTGACCTTTTTCTTTAGATCGGGAGAAAGT\n\n\n5\nCCAGCTCCCTTGGAATATGCATGATCACAGGACTGACAACAAAAGATGGCGGAGGCGTGTAGAAAGAATGGTCATCCTAGTTCTTTGAGGGCGTAAGAGA\n\n\n6\nGCGGTTCTGCATGGTTCCCGATCAAAGCATGGAAATCCATTCGATCGCAGTCAGGCTAACCCCGTTGCGGCCACTGCACATTTGTGGTAGAAATCCCTGG\n\n\n\n\n\nEjercicio: Genera un objeto data.table en el que la primera columna sea un id de secuencia y la segunda sea una secuencia (aleatoria) de tamaño 300 caracteres\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n\nsecuencias &lt;- data.table(\n                id = seq(1,10000), \n                sequencia = sapply(seq(1, 10000), function(x) paste(sample(c(\"A\", \"T\", \"C\", \"G\"), 100, replace = TRUE), collapse = \"\")))\n\nhead(secuencias)\n\n   id                                                                                            sequencia\n1:  1 TGGTTGGTTACCTAAAGAAGGTGTCCATCGGGATTTATTTGCTGGCGAGGTGGGACACAATTCAGTTTAGTGGTTCCACCAAGACTATCGTAGTAACTAC\n2:  2 CTATAGTGAACGCGGGCAGTTAGTGCGTTTCGTAGGCCAACTAATTGGAATAATCGAATAGTGAACTTCACACATTTATTCGCTCACTGTACTACTCCTT\n3:  3 CCAGGACTATCTCACATTCGCATGTACTTGGCCAACCTATCTGCTTTGACCGAGCAACGACTCACTGCCACTCGAGTCCTTACACCGTGCCCCCCTCACG\n4:  4 CCTTCCATTAAGTGATTCCCGATCACACCCCCTTACCGTCCGGGCAGCTGGGCCAATGTCATAACGGGCTGACCAGGAGCGGAGGGGTATCTCGAACCTT\n5:  5 AGCTGAGGGAACTTGCAAGTGAGATGACCTTCAAGAACCTGGCTCGGAAGGGTAACGCCGGACAGCACCGAAGGTGGACCCCCGTGATTCCTGAGGTCGC\n6:  6 ACAACCTGGTGGCTGGTATCATTCAGATCTTAACCCTGACATGAATACCAACAATGACCAAAGGGTATAAAACGTTGATTTGTGATGCAAATCGATCCCC"
  },
  {
    "objectID": "tema2.html#importar-datos-de-archivos",
    "href": "tema2.html#importar-datos-de-archivos",
    "title": "Importar y exportar datos",
    "section": "Importar datos de archivos",
    "text": "Importar datos de archivos\nAlternativamente, se puede importar utilizando la función fread. Por ejemplo, podemos importar la tabla de XX que tiene ZZ registros.\n\nlibrary(data.table)\n\ndata = fread(\"https://raw.githubusercontent.com/Rdatatable/data.table/master/vignettes/flights14.csv\")\n\ndata\n\n         year month   day dep_delay arr_delay carrier origin   dest air_time distance  hour\n        &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt;  &lt;char&gt; &lt;char&gt; &lt;char&gt;    &lt;int&gt;    &lt;int&gt; &lt;int&gt;\n     1:  2014     1     1        14        13      AA    JFK    LAX      359     2475     9\n     2:  2014     1     1        -3        13      AA    JFK    LAX      363     2475    11\n     3:  2014     1     1         2         9      AA    JFK    LAX      351     2475    19\n     4:  2014     1     1        -8       -26      AA    LGA    PBI      157     1035     7\n     5:  2014     1     1         2         1      AA    JFK    LAX      350     2475    13\n    ---                                                                                    \n253312:  2014    10    31         1       -30      UA    LGA    IAH      201     1416    14\n253313:  2014    10    31        -5       -14      UA    EWR    IAH      189     1400     8\n253314:  2014    10    31        -8        16      MQ    LGA    RDU       83      431    11\n253315:  2014    10    31        -4        15      MQ    LGA    DTW       75      502    11\n253316:  2014    10    31        -5         1      MQ    LGA    SDF      110      659     8"
  },
  {
    "objectID": "tema2.html#data.frame---data.table",
    "href": "tema2.html#data.frame---data.table",
    "title": "Importar y exportar datos",
    "section": "data.frame - data.table",
    "text": "data.frame - data.table\nEl objeto de data.table es un objeto basado en un data.frame, por lo tanto es compatible con las funciones de R base que trabajan con data.frame.\nstr(data)\nClasses ‘data.table’ and 'data.frame':  3062756 obs. of  23 variables:\n $ gbifID                          :integer64 2825623524 2825649445 2825649446 2825649447 2825649448 2825649449 2825649452 2825649453 ... \n $ occurrenceID                    : chr  \"TAIF:PLANT:318128:1:1:411555\" \"TAIF:PLANT:318579:1:1:411579\" \"TAIF:PLANT:318694:1:1:411603\" \"TAIF:PLANT:318705:1:1:411602\" ...\n $ phylum                          : chr  \"Tracheophyta\" \"Tracheophyta\" \"Tracheophyta\" \"Tracheophyta\" ...\n $ class                           : chr  \"Polypodiopsida\" \"Polypodiopsida\" \"Polypodiopsida\" \"Polypodiopsida\" ...\n $ order                           : chr  \"Polypodiales\" \"Polypodiales\" \"Polypodiales\" \"Polypodiales\" ...\n $ family                          : chr  \"Pteridaceae\" \"Pteridaceae\" \"Polypodiaceae\" \"Aspleniaceae\" ...\n $ genus                           : chr  \"Adiantum\" \"Scoliosorus\" \"Pleopeltis\" \"Asplenium\" ...\n $ species                         : chr  \"Adiantum andicola\" \"Scoliosorus ensiformis\" \"Pleopeltis polylepis\" \"Asplenium monanthes\" ...\n $ infraspecificEpithet            : chr  \"\" \"\" \"interjecta\" \"\" ...\n $ taxonRank                       : chr  \"SPECIES\" \"SPECIES\" \"VARIETY\" \"SPECIES\" ...\n $ scientificName                  : chr  \"Adiantum andicola Liebm.\" \"Scoliosorus ensiformis (Hook.) T.Moore\" \"Pleopeltis polylepis var. interjecta (Weath.) E.A.Hooper\" \"Asplenium monanthes L.\" ...\n $ verbatimScientificName          : chr  \"Adiantum andicola Liebm.\" \"Scoliosorus ensiformis (Hook.) T. Moore\" \"Pleopeltis polylepis (Roem. ex Kunze) T. Moore var. interjecta (Weath.) E. A. Hooper\" \"Asplenium monanthes L.\" ...\n $ verbatimScientificNameAuthorship: chr  \"\" \"\" \"\" \"\" ...\n $ countryCode                     : chr  \"MX\" \"MX\" \"MX\" \"MX\" ...\n $ stateProvince                   : chr  \"Oaxaca (瓦哈卡州)\" \"Oaxaca (瓦哈卡州)\" \"Oaxaca (瓦哈卡州)\" \"Oaxaca (瓦哈卡州)\" ...\n $ decimalLatitude                 : num  17.3 17.3 17.4 17.4 17.3 ...\n $ decimalLongitude                : num  -96.4 -96.4 -96.4 -96.4 -96.4 ...\n $ coordinateUncertaintyInMeters   : num  NA NA NA NA NA NA NA NA NA NA ...\n $ elevation                       : num  2267 2267 2959 2820 2267 ...\n $ day                             : int  27 27 29 29 27 1 27 27 5 1 ...\n $ month                           : int  2 2 2 2 2 3 2 2 5 3 ...\n $ year                            : int  2012 2012 2012 2012 2012 2012 2012 2012 2000 2012 ...\n $ basisOfRecord                   : chr  \"PRESERVED_SPECIMEN\" \"PRESERVED_SPECIMEN\" \"PRESERVED_SPECIMEN\" \"PRESERVED_SPECIMEN\" ...\n - attr(*, \".internal.selfref\")=&lt;externalptr&gt; \n - attr(*, \"index\")= int(0) \n  ..- attr(*, \"__genus\")= int [1:3062756] 419 423 490 494 513 514 521 542 571 585 ...\n\nSin embargo, los objetos se pueden cambiar de clase. Por ejemplo:\n\nlibrary(magrittr)\n\nas.data.frame(DT) %&gt;% class()\n\n[1] \"data.frame\"\n\nas.data.frame(DT) %&gt;% as.data.table() %&gt;% class()\n\n[1] \"data.table\" \"data.frame\""
  },
  {
    "objectID": "tema2.html#exportar",
    "href": "tema2.html#exportar",
    "title": "Importar y exportar datos",
    "section": "Exportar",
    "text": "Exportar\ndata.table también tiene una función optimizada para escribir los datos con los que estamos trabajando en forma de archivo. Los argumentos básicos son:\n\nx = objeto que se quiere exportar como archivo\nfile = nombre del archivo\nsep = caracter que se quiere utilizar como delimitador de campo\ncompress = debido a que podríamos estar trabajando con tablas de datos muy grandes podemos escribir los archivos comprimidos. Se puede especificar “gzip” o “auto” y utilizar la extension .gz en el nombre del archivo para escribir un archivo comprimido, la opción “none” nos permite escribir archivos sin comprimir.\n\nEjemplo: podemos escribir la tabla DT que creamos al principio de la sección:\nfwrite(data, \"data/testDT.csv\", sep = \",\")\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nExporta la tabla de registros de especimenes como un archivo comprimido.\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\nfwrite(data, \"data/plantae_mexico_conCoords_specimen.csv.gz\", sep = \",\", compress = \"auto\")"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "tema3.html",
    "href": "tema3.html",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "Similar a como se seleccionan filas en un data.frame, en un objeto data.table se pueden seleccionar filas utilizando rangos de índices. En los siguientes dos ejemplos se muestra como seleccionar las primeras dos filas de la tabla de registros.\nlibrary(data.table)\n\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\")\n\ndata[1:2] \n\n       gbifID                 occurrenceID       phylum          class        order      family       genus\n1: 2825623524 TAIF:PLANT:318128:1:1:411555 Tracheophyta Polypodiopsida Polypodiales Pteridaceae    Adiantum\n2: 2825649445 TAIF:PLANT:318579:1:1:411579 Tracheophyta Polypodiopsida Polypodiales Pteridaceae Scoliosorus\n                  species infraspecificEpithet taxonRank                         scientificName\n1:      Adiantum andicola                        SPECIES               Adiantum andicola Liebm.\n2: Scoliosorus ensiformis                        SPECIES Scoliosorus ensiformis (Hook.) T.Moore\n                    verbatimScientificName verbatimScientificNameAuthorship countryCode     stateProvince\n1:                Adiantum andicola Liebm.                               NA          MX Oaxaca (瓦哈卡州)\n2: Scoliosorus ensiformis (Hook.) T. Moore                               NA          MX Oaxaca (瓦哈卡州)\n   decimalLatitude decimalLongitude coordinateUncertaintyInMeters elevation day month year      basisOfRecord\n1:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n2:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n\n\n\nNota: Cuando solo estamos seleccionando filas no es necesario incluir la coma al final.\n\ndata[1:2,] \n\n       gbifID                 occurrenceID       phylum          class        order      family       genus\n1: 2825623524 TAIF:PLANT:318128:1:1:411555 Tracheophyta Polypodiopsida Polypodiales Pteridaceae    Adiantum\n2: 2825649445 TAIF:PLANT:318579:1:1:411579 Tracheophyta Polypodiopsida Polypodiales Pteridaceae Scoliosorus\n                  species infraspecificEpithet taxonRank                         scientificName\n1:      Adiantum andicola                        SPECIES               Adiantum andicola Liebm.\n2: Scoliosorus ensiformis                        SPECIES Scoliosorus ensiformis (Hook.) T.Moore\n                    verbatimScientificName verbatimScientificNameAuthorship countryCode     stateProvince\n1:                Adiantum andicola Liebm.                               NA          MX Oaxaca (瓦哈卡州)\n2: Scoliosorus ensiformis (Hook.) T. Moore                               NA          MX Oaxaca (瓦哈卡州)\n   decimalLatitude decimalLongitude coordinateUncertaintyInMeters elevation day month year      basisOfRecord\n1:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n2:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n\n\n\n\n\n\nDe acuerdo con la sintaxis del paquete, el espacio i es el lugar en el que se pueden realizar operaciones sobre las filas como los filtros. Por ejemplo, utilizando la tabla de registros de especies de plantas podríamos estar interesados en solo seleccionar aquellos registros que pertenezcan al género Quercus.\ndata_quercus &lt;- data[genus == \"Quercus\",] \n\ndim(data_quercus)\n\n\n[1] 51985    23\n\n\nO podríamos estar interesadas en seleccionar solo los registros más viejos, los que fueron colectados antes de 1950.\ndata_quercus_viejos &lt;- data[genus == \"Quercus\" & year &lt;= 1950,]\n\ndim(data_quercus_viejos)\n\n\n[1] 2927   23\n\n\n\n\n\n\nOtra función que se puede realizar en el espacio de las filas es ordenarlas. Por ejemplo, podríamos ordenar la tabla de registros del género Quercus por estado en orden alfabético.\n\n# Ordenar los datos de la tabla de registros de Quercus por estado en orden alfabetico\n\nordered_data = data_quercus[order(stateProvince)]\n\n# seleccionar la columna de estado como vector y seleccionar los valores únicos\n# mostrar solo los primeros valores\n\nunique(ordered_data$stateProvince) |&gt; head()\n\n[1] \"\"                        \"Aguascalientes\"          \"Baja California\"         \"Baja California (norte)\"\n[5] \"Baja California Norte\"   \"Baja California Sur\"    \n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\n\nCarga el archivo de registros de plantas utilizando la función fread que revisamos en el tema anterior\nUtiliza un filtro para quedarte con las filas que pertenezcan a un género o especie que te guste\nOrdena de manera descendente por año\n\nPregunta:\n¿De qué año son los registros más nuevos y más viejos de la especie que escogiste? (selecciona utilizando rangos la primera y la última fila de la tabla)\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\nlibrary(data.table)\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\", quote=\"\")\n\ndata_quercus &lt;- data[genus == \"Quercus\" & !is.na(year),] \n\ndata_quercus_ordenado &lt;- data_quercus[order(-year)] \n\n# Una función útil en el paquete es la función .N que te permite guardar el número de observaciones en el grupo actual. En este caso solo tenemos un solo grupo y por lo tanto guarda el número de filas en la tabla.\n\ndata_quercus_ordenado[c(1,.N),] |&gt; knitr::kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngbifID\noccurrenceID\nphylum\nclass\norder\nfamily\ngenus\nspecies\ninfraspecificEpithet\ntaxonRank\nscientificName\nverbatimScientificName\nverbatimScientificNameAuthorship\ncountryCode\nstateProvince\ndecimalLatitude\ndecimalLongitude\ncoordinateUncertaintyInMeters\nelevation\nday\nmonth\nyear\nbasisOfRecord\n\n\n\n\n4531629317\n101427a9-2277-4bbb-b31b-1f7e463b2e0e\nTracheophyta\nMagnoliopsida\nFagales\nFagaceae\nQuercus\nQuercus hypoleucoides\n\nSPECIES\nQuercus hypoleucoides A.Camus\nQuercus hypoleucoides\nA. Camus\nMX\nSonora\n30.82500\n-110.22300\nNA\n1713\n12\n9\n2023\nPRESERVED_SPECIMEN\n\n\n730972925\nhttp://coldb.mnhn.fr/catalognumber/mnhn/p/p06859288\nTracheophyta\nMagnoliopsida\nFagales\nFagaceae\nQuercus\nQuercus caudicans\n\nSPECIES\nQuercus caudicans Née\nQuercus candicans Née\nNée\nMX\nMorelos\n19.02889\n-99.24833\nNA\nNA\n20\n10\n1827\nPRESERVED_SPECIMEN"
  },
  {
    "objectID": "tema3.html#filtros-y-selección-de-filas",
    "href": "tema3.html#filtros-y-selección-de-filas",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "Similar a como se seleccionan filas en un data.frame, en un objeto data.table se pueden seleccionar filas utilizando rangos de índices. En los siguientes dos ejemplos se muestra como seleccionar las primeras dos filas de la tabla de registros.\nlibrary(data.table)\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\")\n\ndata[1:2] \n\n       gbifID                 occurrenceID       phylum          class        order      family       genus\n1: 2825623524 TAIF:PLANT:318128:1:1:411555 Tracheophyta Polypodiopsida Polypodiales Pteridaceae    Adiantum\n2: 2825649445 TAIF:PLANT:318579:1:1:411579 Tracheophyta Polypodiopsida Polypodiales Pteridaceae Scoliosorus\n                  species infraspecificEpithet taxonRank                         scientificName\n1:      Adiantum andicola                        SPECIES               Adiantum andicola Liebm.\n2: Scoliosorus ensiformis                        SPECIES Scoliosorus ensiformis (Hook.) T.Moore\n                    verbatimScientificName verbatimScientificNameAuthorship countryCode     stateProvince\n1:                Adiantum andicola Liebm.                               NA          MX Oaxaca (瓦哈卡州)\n2: Scoliosorus ensiformis (Hook.) T. Moore                               NA          MX Oaxaca (瓦哈卡州)\n   decimalLatitude decimalLongitude coordinateUncertaintyInMeters elevation day month year      basisOfRecord\n1:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n2:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n\n\n\nNota: Cuando solo estamos seleccionando filas no es necesario incluir la coma al final.\n\ndata[1:2,] \n\n       gbifID                 occurrenceID       phylum          class        order      family       genus\n1: 2825623524 TAIF:PLANT:318128:1:1:411555 Tracheophyta Polypodiopsida Polypodiales Pteridaceae    Adiantum\n2: 2825649445 TAIF:PLANT:318579:1:1:411579 Tracheophyta Polypodiopsida Polypodiales Pteridaceae Scoliosorus\n                  species infraspecificEpithet taxonRank                         scientificName\n1:      Adiantum andicola                        SPECIES               Adiantum andicola Liebm.\n2: Scoliosorus ensiformis                        SPECIES Scoliosorus ensiformis (Hook.) T.Moore\n                    verbatimScientificName verbatimScientificNameAuthorship countryCode     stateProvince\n1:                Adiantum andicola Liebm.                               NA          MX Oaxaca (瓦哈卡州)\n2: Scoliosorus ensiformis (Hook.) T. Moore                               NA          MX Oaxaca (瓦哈卡州)\n   decimalLatitude decimalLongitude coordinateUncertaintyInMeters elevation day month year      basisOfRecord\n1:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n2:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n\n\n\n\n\n\nDe acuerdo con la sintaxis del paquete, el espacio i es el lugar en el que se pueden realizar operaciones sobre las filas como los filtros. Por ejemplo, utilizando la tabla de registros de especies de plantas podríamos estar interesados en solo seleccionar aquellos registros que pertenezcan al género Quercus.\ndata_quercus &lt;- data[genus == \"Quercus\",] \n\ndim(data_quercus)\n\n\n[1] 51985    23\n\n\nO podríamos estar interesadas en seleccionar solo los registros más viejos, los que fueron colectados antes de 1950.\ndata_quercus_viejos &lt;- data[genus == \"Quercus\" & year &lt;= 1950,]\n\ndim(data_quercus_viejos)\n\n\n[1] 2927   23\n\n\n\n\n\n\nOtra función que se puede realizar en el espacio de las filas es ordenarlas. Por ejemplo, podríamos ordenar la tabla de registros del género Quercus por estado en orden alfabético.\n\n# Ordenar los datos de la tabla de registros de Quercus por estado en orden alfabetico\n\nordered_data = data_quercus[order(stateProvince)]\n\n# seleccionar la columna de estado como vector y seleccionar los valores únicos\n# mostrar solo los primeros valores\n\nunique(ordered_data$stateProvince) |&gt; head()\n\n[1] \"\"                        \"Aguascalientes\"          \"Baja California\"         \"Baja California (norte)\"\n[5] \"Baja California Norte\"   \"Baja California Sur\"    \n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\n\nCarga el archivo de registros de plantas utilizando la función fread que revisamos en el tema anterior\nUtiliza un filtro para quedarte con las filas que pertenezcan a un género o especie que te guste\nOrdena de manera descendente por año\n\nPregunta:\n¿De qué año son los registros más nuevos y más viejos de la especie que escogiste? (selecciona utilizando rangos la primera y la última fila de la tabla)\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\nlibrary(data.table)\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\", quote=\"\")\n\ndata_quercus &lt;- data[genus == \"Quercus\" & !is.na(year),] \n\ndata_quercus_ordenado &lt;- data_quercus[order(-year)] \n\n# Una función útil en el paquete es la función .N que te permite guardar el número de observaciones en el grupo actual. En este caso solo tenemos un solo grupo y por lo tanto guarda el número de filas en la tabla.\n\ndata_quercus_ordenado[c(1,.N),] |&gt; knitr::kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngbifID\noccurrenceID\nphylum\nclass\norder\nfamily\ngenus\nspecies\ninfraspecificEpithet\ntaxonRank\nscientificName\nverbatimScientificName\nverbatimScientificNameAuthorship\ncountryCode\nstateProvince\ndecimalLatitude\ndecimalLongitude\ncoordinateUncertaintyInMeters\nelevation\nday\nmonth\nyear\nbasisOfRecord\n\n\n\n\n4531629317\n101427a9-2277-4bbb-b31b-1f7e463b2e0e\nTracheophyta\nMagnoliopsida\nFagales\nFagaceae\nQuercus\nQuercus hypoleucoides\n\nSPECIES\nQuercus hypoleucoides A.Camus\nQuercus hypoleucoides\nA. Camus\nMX\nSonora\n30.82500\n-110.22300\nNA\n1713\n12\n9\n2023\nPRESERVED_SPECIMEN\n\n\n730972925\nhttp://coldb.mnhn.fr/catalognumber/mnhn/p/p06859288\nTracheophyta\nMagnoliopsida\nFagales\nFagaceae\nQuercus\nQuercus caudicans\n\nSPECIES\nQuercus caudicans Née\nQuercus candicans Née\nNée\nMX\nMorelos\n19.02889\n-99.24833\nNA\nNA\n20\n10\n1827\nPRESERVED_SPECIMEN"
  },
  {
    "objectID": "tema3.html#seleccionar-columnas",
    "href": "tema3.html#seleccionar-columnas",
    "title": "Filtros y selección de columnas",
    "section": "Seleccionar columnas",
    "text": "Seleccionar columnas\n\nSeleccionar columnas por índice\nDe acuerdo con la sintaxis del paquete, el espacio j nos permite realizar operaciones sobre las columnas. Una de esas operaciones es la selección de columnas.\nSe pueden seleccionar por medio de índices:\n\ndata[,7:8,]\n\n               genus               species\n     1:    Syngonium  Syngonium angustatum\n     2:     Scaevola     Scaevola plumieri\n     3:   Tillandsia    Tillandsia fuchsii\n     4:    Commelina     Commelina rufipes\n     5: Heterosperma Heterosperma pinnatum\n    ---                                   \n 99996:   Polypodium                      \n 99997: Hesperoyucca Hesperoyucca whipplei\n 99998: Fimbristylis   Fimbristylis cymosa\n 99999:    Commelina    Commelina tuberosa\n100000:       Salvia    Salvia polystachia\n\n\n\n\nSeleccionar columnas por nombre\nSe pueden seleccionar las columas por nombre y regresar como vector:\n\ndata[,species] |&gt; head()\n\n[1] \"Syngonium angustatum\"  \"Scaevola plumieri\"     \"Tillandsia fuchsii\"    \"Commelina rufipes\"    \n[5] \"Heterosperma pinnatum\" \"Begonia crassicaulis\" \n\n\nSe pueden seleccionar las columnas usando una lista y regresar como tabla:\n\ndata[,list(family,genus,species)]\n\n               family        genus               species\n     1:       Araceae    Syngonium  Syngonium angustatum\n     2:  Goodeniaceae     Scaevola     Scaevola plumieri\n     3:  Bromeliaceae   Tillandsia    Tillandsia fuchsii\n     4: Commelinaceae    Commelina     Commelina rufipes\n     5:    Asteraceae Heterosperma Heterosperma pinnatum\n    ---                                                 \n 99996: Polypodiaceae   Polypodium                      \n 99997:  Asparagaceae Hesperoyucca Hesperoyucca whipplei\n 99998:    Cyperaceae Fimbristylis   Fimbristylis cymosa\n 99999: Commelinaceae    Commelina    Commelina tuberosa\n100000:     Lamiaceae       Salvia    Salvia polystachia\n\n\nUn atajo para no escribir list() es .():\n\ndata[,.(family,genus,species)]\n\n               family        genus               species\n     1:       Araceae    Syngonium  Syngonium angustatum\n     2:  Goodeniaceae     Scaevola     Scaevola plumieri\n     3:  Bromeliaceae   Tillandsia    Tillandsia fuchsii\n     4: Commelinaceae    Commelina     Commelina rufipes\n     5:    Asteraceae Heterosperma Heterosperma pinnatum\n    ---                                                 \n 99996: Polypodiaceae   Polypodium                      \n 99997:  Asparagaceae Hesperoyucca Hesperoyucca whipplei\n 99998:    Cyperaceae Fimbristylis   Fimbristylis cymosa\n 99999: Commelinaceae    Commelina    Commelina tuberosa\n100000:     Lamiaceae       Salvia    Salvia polystachia\n\n\nPara seleccionar columnas guardadas en una variable se puede utilizar el prefijo ..:\n\nvariables &lt;- c(\"family\",\"genus\",\"species\")\n\ndata[ , ..variables]\n\n               family        genus               species\n     1:       Araceae    Syngonium  Syngonium angustatum\n     2:  Goodeniaceae     Scaevola     Scaevola plumieri\n     3:  Bromeliaceae   Tillandsia    Tillandsia fuchsii\n     4: Commelinaceae    Commelina     Commelina rufipes\n     5:    Asteraceae Heterosperma Heterosperma pinnatum\n    ---                                                 \n 99996: Polypodiaceae   Polypodium                      \n 99997:  Asparagaceae Hesperoyucca Hesperoyucca whipplei\n 99998:    Cyperaceae Fimbristylis   Fimbristylis cymosa\n 99999: Commelinaceae    Commelina    Commelina tuberosa\n100000:     Lamiaceae       Salvia    Salvia polystachia\n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\n\nSelecciona las columnas que contengan información acerca de la ubicación geográfica de los registros.\n\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\ninfo_geografica &lt;- c(“countryCode”, “stateProvince”, “decimalLatitude”, “decimalLongitude”, “coordinateUncertaintyInMeters”, “elevation”)\n\nvars_info_geografica &lt;- c(\"countryCode\", \"stateProvince\", \"decimalLatitude\", \"decimalLongitude\", \"coordinateUncertaintyInMeters\", \"elevation\")\n\ndata[,..vars_info_geografica,]\n\n        countryCode                   stateProvince decimalLatitude decimalLongitude coordinateUncertaintyInMeters\n     1:          MX                        Veracruz        19.33330        -96.66670                            NA\n     2:          MX                         Yucatan        21.25417        -89.80833                            70\n     3:          MX                         Chiapas        15.65000        -92.80000                           100\n     4:          MX                         Chiapas        16.08111        -93.47805                           100\n     5:          MX                         Durango        25.54389       -104.59100                            50\n    ---                                                                                                           \n 99996:          MX                          Mexico        20.00583       -100.13200                            80\n 99997:          MX                 Baja California        32.35806       -116.93146                         10000\n 99998:          MX Veracruz de ignacio de la llave        20.20833        -96.79167                            80\n 99999:          MX             Michoacan de ocampo        19.76222       -100.86611                            80\n100000:          MX                        Guerrero        17.46814       -100.13643                         10490\n        elevation\n     1:        NA\n     2:       0.0\n     3:    1400.0\n     4:     473.5\n     5:    1900.0\n    ---          \n 99996:    2400.0\n 99997:        NA\n 99998:        NA\n 99999:    1020.0\n100000:    1300.0\n\n\n\n\n\n\n\nRenombrar columnas\nEn el espacio de operaciones sobre las columnas también se pueden renombrar las columnas.\n\ndata[, .(especie = species, genero = genus)]\n\n                      especie       genero\n     1:  Syngonium angustatum    Syngonium\n     2:     Scaevola plumieri     Scaevola\n     3:    Tillandsia fuchsii   Tillandsia\n     4:     Commelina rufipes    Commelina\n     5: Heterosperma pinnatum Heterosperma\n    ---                                   \n 99996:                         Polypodium\n 99997: Hesperoyucca whipplei Hesperoyucca\n 99998:   Fimbristylis cymosa Fimbristylis\n 99999:    Commelina tuberosa    Commelina\n100000:    Salvia polystachia       Salvia"
  },
  {
    "objectID": "tema1.html",
    "href": "tema1.html",
    "title": "Sintaxis básica",
    "section": "",
    "text": "data.table es un objeto de R que está pensado para mantener las operaciones en uno o pocos comandos. La lógica de la sintaxis básica es la siguiente:"
  },
  {
    "objectID": "tema2.html#importar-y-exportar-datos-de-archivos",
    "href": "tema2.html#importar-y-exportar-datos-de-archivos",
    "title": "Importar y exportar datos",
    "section": "Importar y exportar datos de archivos",
    "text": "Importar y exportar datos de archivos\nLas funciones para importar (fread) y exportar (fwrite) tienen las siguientes opciones principales:\n\nx: el objeto que queremos exportar.\nfile: ruta para escribir/leer el archivo.\nsep: el delimitador entre columnas.\ndec: el separador decimal.\ndateTimeAs: formato en el que guardar objetos de fecha. Por defecto es “ISO”.\n\n\nConjunto de datos\nEn esta y la siguiente sección vamos a trabajar una tabla de todos los especímenes de plantas que tiene registrados la plataforma GBIF (Global Biodiversity Information Facility) para México. Específicamente esta tabla solo contiene los registros de plantas que tienen un especímen guardado en alguna colección biológica y que tienen coordenadas que nos permitan ubicarlos.\nEjemplo: Por ejemplo, podemos importar la tabla de plantae_mexico_conCoords_specimen.csv que tiene 3062756 registros y 50 filas.\nNota: fread() también permite leer archivos comprimidos .gz\nlibrary(data.table)\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\", quote=\"\")\n\nhead(data) |&gt; knitr::kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngbifID\noccurrenceID\nphylum\nclass\norder\nfamily\ngenus\nspecies\ninfraspecificEpithet\ntaxonRank\nscientificName\nverbatimScientificName\nverbatimScientificNameAuthorship\ncountryCode\nstateProvince\ndecimalLatitude\ndecimalLongitude\ncoordinateUncertaintyInMeters\nelevation\nday\nmonth\nyear\nbasisOfRecord\n\n\n\n\n2825623524\nTAIF:PLANT:318128:1:1:411555\nTracheophyta\nPolypodiopsida\nPolypodiales\nPteridaceae\nAdiantum\nAdiantum andicola\n\nSPECIES\nAdiantum andicola Liebm.\nAdiantum andicola Liebm.\nNA\nMX\nOaxaca (瓦哈卡州)\n17.30213\n-96.38080\nNA\n2267\n27\n2\n2012\nPRESERVED_SPECIMEN\n\n\n2825649445\nTAIF:PLANT:318579:1:1:411579\nTracheophyta\nPolypodiopsida\nPolypodiales\nPteridaceae\nScoliosorus\nScoliosorus ensiformis\n\nSPECIES\nScoliosorus ensiformis (Hook.) T.Moore\nScoliosorus ensiformis (Hook.) T. Moore\nNA\nMX\nOaxaca (瓦哈卡州)\n17.30213\n-96.38080\nNA\n2267\n27\n2\n2012\nPRESERVED_SPECIMEN\n\n\n2825649446\nTAIF:PLANT:318694:1:1:411603\nTracheophyta\nPolypodiopsida\nPolypodiales\nPolypodiaceae\nPleopeltis\nPleopeltis polylepis\ninterjecta\nVARIETY\nPleopeltis polylepis var. interjecta (Weath.) E.A.Hooper\nPleopeltis polylepis (Roem. ex Kunze) T. Moore var. interjecta (Weath.) E. A. Hooper\nNA\nMX\nOaxaca (瓦哈卡州)\n17.38178\n-96.44162\nNA\n2959\n29\n2\n2012\nPRESERVED_SPECIMEN\n\n\n2825649447\nTAIF:PLANT:318705:1:1:411602\nTracheophyta\nPolypodiopsida\nPolypodiales\nAspleniaceae\nAsplenium\nAsplenium monanthes\n\nSPECIES\nAsplenium monanthes L.\nAsplenium monanthes L.\nNA\nMX\nOaxaca (瓦哈卡州)\n17.36213\n-96.44678\nNA\n2820\n29\n2\n2012\nPRESERVED_SPECIMEN\n\n\n2825649448\nTAIF:PLANT:318740:1:1:411609\nTracheophyta\nLycopodiopsida\nLycopodiales\nLycopodiaceae\nDiphasiastrum\nDiphasiastrum thyoides\n\nSPECIES\nDiphasiastrum thyoides (Humb. & Bonpl. ex Willd.) Holub\nDiphasiastrum thyoides (Humb. & Bonpl. ex Willd.) Holub\nNA\nMX\nOaxaca (瓦哈卡州)\n17.30213\n-96.38080\nNA\n2267\n27\n2\n2012\nPRESERVED_SPECIMEN\n\n\n2825649449\nTAIF:PLANT:318741:1:1:411583\nTracheophyta\nPolypodiopsida\nEquisetales\nEquisetaceae\nEquisetum\nEquisetum praealtum\naffine\nVARIETY\nEquisetum hyemale var. affine (Engelm.) A.A.Eaton\nEquisetum hyemale L. var. affine (Engelm.) A. A. Eaton\nNA\nMX\nOaxaca (瓦哈卡州)\n17.35835\n-96.44460\nNA\n2000\n1\n3\n2012\nPRESERVED_SPECIMEN\n\n\n\n\n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\nUtiliza el código anterior para cargar la tabla de especímenes en tu computadora.\nNota: La tabla tiene más de 3 millones de registros y, en las pruebas que hicimos, observamos que la tabla ocupa 1.72 GB de memoria cuando se carga. Incluimos un subconjunto aleatorio de 100,000 filas (sub_100000_plantae_mexico_conCoords_specimen.csv) para los que quieran practicar con objetos que ocupen menos memoria."
  },
  {
    "objectID": "tema2.html#velocidad-dplyr-vs-data.table",
    "href": "tema2.html#velocidad-dplyr-vs-data.table",
    "title": "Importar y exportar datos",
    "section": "Velocidad dplyr vs data.table",
    "text": "Velocidad dplyr vs data.table\n\nlibrary(rbenchmark)\n\ntest = benchmark(\"r base\" = {\n            read.csv(\"big_data/plantae_mexico_conCoords_specimen.csv\")\n          },\n          \"data.table\" = {\n            fread(\"big_data/plantae_mexico_conCoords_specimen.csv\")\n          },\n          replications = 10,\n          columns = c(\"test\", \"replications\", \"elapsed\",\n                      \"relative\", \"user.self\", \"sys.self\"))\nNota: Si quieres correr este código revisa cuántas réplicas quieres hacer porque está escrito para leer la tabla de registros grande 10 veces utilizando cada método.\n\n\n\n\n\nX\ntest\nreplications\nelapsed\nrelative\nuser.self\nsys.self\n\n\n\n\n2\ndata.table\n10\n110.933\n1.000\n206.818\n3.027\n\n\n1\nr base\n10\n380.665\n3.431\n376.605\n4.057\n\n\n\n\n\n\n\n\n\n\n\nEjercicio opcional\n\n\n\n\n\nSi quieres, puedes revisar el tiempo que te toma cargar la base de datos XX utilizando read.csv y fread. Utiliza el comando de benchmark de la paquetería rbenchmark para contar el tiempo. Nota: en el número de réplicas puedes poner una o dos porque si no te vas a tardar mucho."
  },
  {
    "objectID": "index.html#cheatsheet",
    "href": "index.html#cheatsheet",
    "title": "Introducción y recursos",
    "section": "Cheatsheet",
    "text": "Cheatsheet"
  },
  {
    "objectID": "tema3.html#seleccionar-por-índices",
    "href": "tema3.html#seleccionar-por-índices",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "Similar a como se seleccionan filas en un data.frame, en un objeto data.table se pueden seleccionar filas utilizando rangos de índices. En los siguientes dos ejemplos se muestra como seleccionar las primeras dos filas de la tabla de registros.\nlibrary(data.table)\n\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\")\n\ndata[1:2] \n\n       gbifID                 occurrenceID       phylum          class        order      family       genus\n1: 2825623524 TAIF:PLANT:318128:1:1:411555 Tracheophyta Polypodiopsida Polypodiales Pteridaceae    Adiantum\n2: 2825649445 TAIF:PLANT:318579:1:1:411579 Tracheophyta Polypodiopsida Polypodiales Pteridaceae Scoliosorus\n                  species infraspecificEpithet taxonRank                         scientificName\n1:      Adiantum andicola                        SPECIES               Adiantum andicola Liebm.\n2: Scoliosorus ensiformis                        SPECIES Scoliosorus ensiformis (Hook.) T.Moore\n                    verbatimScientificName verbatimScientificNameAuthorship countryCode     stateProvince\n1:                Adiantum andicola Liebm.                               NA          MX Oaxaca (瓦哈卡州)\n2: Scoliosorus ensiformis (Hook.) T. Moore                               NA          MX Oaxaca (瓦哈卡州)\n   decimalLatitude decimalLongitude coordinateUncertaintyInMeters elevation day month year      basisOfRecord\n1:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n2:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n\n\n\nNota: Cuando solo estamos seleccionando filas no es necesario incluir la coma al final.\n\ndata[1:2,] \n\n       gbifID                 occurrenceID       phylum          class        order      family       genus\n1: 2825623524 TAIF:PLANT:318128:1:1:411555 Tracheophyta Polypodiopsida Polypodiales Pteridaceae    Adiantum\n2: 2825649445 TAIF:PLANT:318579:1:1:411579 Tracheophyta Polypodiopsida Polypodiales Pteridaceae Scoliosorus\n                  species infraspecificEpithet taxonRank                         scientificName\n1:      Adiantum andicola                        SPECIES               Adiantum andicola Liebm.\n2: Scoliosorus ensiformis                        SPECIES Scoliosorus ensiformis (Hook.) T.Moore\n                    verbatimScientificName verbatimScientificNameAuthorship countryCode     stateProvince\n1:                Adiantum andicola Liebm.                               NA          MX Oaxaca (瓦哈卡州)\n2: Scoliosorus ensiformis (Hook.) T. Moore                               NA          MX Oaxaca (瓦哈卡州)\n   decimalLatitude decimalLongitude coordinateUncertaintyInMeters elevation day month year      basisOfRecord\n1:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN\n2:        17.30213         -96.3808                            NA      2267  27     2 2012 PRESERVED_SPECIMEN"
  },
  {
    "objectID": "tema3.html#filtrar-filas",
    "href": "tema3.html#filtrar-filas",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "De acuerdo con la sintaxis del paquete, el espacio i es el lugar en el que se pueden realizar operaciones sobre las filas como los filtros. Por ejemplo, utilizando la tabla de registros de especies de plantas podríamos estar interesados en solo seleccionar aquellos registros que pertenezcan al género Quercus.\ndata_quercus &lt;- data[genus == \"Quercus\",] \n\ndim(data_quercus)\n\n\n[1] 51985    23\n\n\nO podríamos estar interesadas en seleccionar solo los registros más viejos, los que fueron colectados antes de 1950.\ndata_quercus_viejos &lt;- data[genus == \"Quercus\" & year &lt;= 1950,]\n\ndim(data_quercus_viejos)\n\n\n[1] 2927   23"
  },
  {
    "objectID": "tema3.html#ordenar-filas",
    "href": "tema3.html#ordenar-filas",
    "title": "Filtros y selección de columnas",
    "section": "",
    "text": "Otra función que se puede realizar en el espacio de las filas es ordenarlas. Por ejemplo, podríamos ordenar la tabla de registros del género Quercus por estado en orden alfabético.\n\n# Ordenar los datos de la tabla de registros de Quercus por estado en orden alfabetico\n\nordered_data = data_quercus[order(stateProvince)]\n\n# seleccionar la columna de estado como vector y seleccionar los valores únicos\n# mostrar solo los primeros valores\n\nunique(ordered_data$stateProvince) |&gt; head()\n\n[1] \"\"                        \"Aguascalientes\"          \"Baja California\"         \"Baja California (norte)\"\n[5] \"Baja California Norte\"   \"Baja California Sur\"    \n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\n\nCarga el archivo de registros de plantas utilizando la función fread que revisamos en el tema anterior\nUtiliza un filtro para quedarte con las filas que pertenezcan a un género o especie que te guste\nOrdena de manera descendente por año\n\nPregunta:\n¿De qué año son los registros más nuevos y más viejos de la especie que escogiste? (selecciona utilizando rangos la primera y la última fila de la tabla)\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\nlibrary(data.table)\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\", quote=\"\")\n\ndata_quercus &lt;- data[genus == \"Quercus\" & !is.na(year),] \n\ndata_quercus_ordenado &lt;- data_quercus[order(-year)] \n\n# Una función útil en el paquete es la función .N que te permite guardar el número de observaciones en el grupo actual. En este caso solo tenemos un solo grupo y por lo tanto guarda el número de filas en la tabla.\n\ndata_quercus_ordenado[c(1,.N),] |&gt; knitr::kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngbifID\noccurrenceID\nphylum\nclass\norder\nfamily\ngenus\nspecies\ninfraspecificEpithet\ntaxonRank\nscientificName\nverbatimScientificName\nverbatimScientificNameAuthorship\ncountryCode\nstateProvince\ndecimalLatitude\ndecimalLongitude\ncoordinateUncertaintyInMeters\nelevation\nday\nmonth\nyear\nbasisOfRecord\n\n\n\n\n4531629317\n101427a9-2277-4bbb-b31b-1f7e463b2e0e\nTracheophyta\nMagnoliopsida\nFagales\nFagaceae\nQuercus\nQuercus hypoleucoides\n\nSPECIES\nQuercus hypoleucoides A.Camus\nQuercus hypoleucoides\nA. Camus\nMX\nSonora\n30.82500\n-110.22300\nNA\n1713\n12\n9\n2023\nPRESERVED_SPECIMEN\n\n\n730972925\nhttp://coldb.mnhn.fr/catalognumber/mnhn/p/p06859288\nTracheophyta\nMagnoliopsida\nFagales\nFagaceae\nQuercus\nQuercus caudicans\n\nSPECIES\nQuercus caudicans Née\nQuercus candicans Née\nNée\nMX\nMorelos\n19.02889\n-99.24833\nNA\nNA\n20\n10\n1827\nPRESERVED_SPECIMEN"
  },
  {
    "objectID": "tema3.html#seleccionar-columnas-por-índice",
    "href": "tema3.html#seleccionar-columnas-por-índice",
    "title": "Filtros y selección de columnas",
    "section": "Seleccionar columnas por índice",
    "text": "Seleccionar columnas por índice\nDe acuerdo con la sintaxis del paquete, el espacio j nos permite realizar operaciones sobre las columnas. Una de esas operaciones es la selección de columnas.\nSe pueden seleccionar por medio de índices:\n\ndata[,7:8,]\n\n               genus               species\n     1:    Syngonium  Syngonium angustatum\n     2:     Scaevola     Scaevola plumieri\n     3:   Tillandsia    Tillandsia fuchsii\n     4:    Commelina     Commelina rufipes\n     5: Heterosperma Heterosperma pinnatum\n    ---                                   \n 99996:   Polypodium                      \n 99997: Hesperoyucca Hesperoyucca whipplei\n 99998: Fimbristylis   Fimbristylis cymosa\n 99999:    Commelina    Commelina tuberosa\n100000:       Salvia    Salvia polystachia"
  },
  {
    "objectID": "tema3.html#seleccionar-columnas-por-nombre",
    "href": "tema3.html#seleccionar-columnas-por-nombre",
    "title": "Filtros y selección de columnas",
    "section": "Seleccionar columnas por nombre",
    "text": "Seleccionar columnas por nombre\nSe pueden seleccionar las columas por nombre y regresar como vector:\n\ndata[,species] |&gt; head()\n\n[1] \"Syngonium angustatum\"  \"Scaevola plumieri\"     \"Tillandsia fuchsii\"    \"Commelina rufipes\"    \n[5] \"Heterosperma pinnatum\" \"Begonia crassicaulis\" \n\n\nSe pueden seleccionar las columnas usando una lista y regresar como tabla:\n\ndata[,list(family,genus,species)]\n\n               family        genus               species\n     1:       Araceae    Syngonium  Syngonium angustatum\n     2:  Goodeniaceae     Scaevola     Scaevola plumieri\n     3:  Bromeliaceae   Tillandsia    Tillandsia fuchsii\n     4: Commelinaceae    Commelina     Commelina rufipes\n     5:    Asteraceae Heterosperma Heterosperma pinnatum\n    ---                                                 \n 99996: Polypodiaceae   Polypodium                      \n 99997:  Asparagaceae Hesperoyucca Hesperoyucca whipplei\n 99998:    Cyperaceae Fimbristylis   Fimbristylis cymosa\n 99999: Commelinaceae    Commelina    Commelina tuberosa\n100000:     Lamiaceae       Salvia    Salvia polystachia\n\n\nUn atajo para no escribir list() es .():\n\ndata[,.(family,genus,species)]\n\n               family        genus               species\n     1:       Araceae    Syngonium  Syngonium angustatum\n     2:  Goodeniaceae     Scaevola     Scaevola plumieri\n     3:  Bromeliaceae   Tillandsia    Tillandsia fuchsii\n     4: Commelinaceae    Commelina     Commelina rufipes\n     5:    Asteraceae Heterosperma Heterosperma pinnatum\n    ---                                                 \n 99996: Polypodiaceae   Polypodium                      \n 99997:  Asparagaceae Hesperoyucca Hesperoyucca whipplei\n 99998:    Cyperaceae Fimbristylis   Fimbristylis cymosa\n 99999: Commelinaceae    Commelina    Commelina tuberosa\n100000:     Lamiaceae       Salvia    Salvia polystachia\n\n\nPara seleccionar columnas guardadas en una variable se puede utilizar el prefijo ..:\n\nvariables &lt;- c(\"family\",\"genus\",\"species\")\n\ndata[ , ..variables]\n\n               family        genus               species\n     1:       Araceae    Syngonium  Syngonium angustatum\n     2:  Goodeniaceae     Scaevola     Scaevola plumieri\n     3:  Bromeliaceae   Tillandsia    Tillandsia fuchsii\n     4: Commelinaceae    Commelina     Commelina rufipes\n     5:    Asteraceae Heterosperma Heterosperma pinnatum\n    ---                                                 \n 99996: Polypodiaceae   Polypodium                      \n 99997:  Asparagaceae Hesperoyucca Hesperoyucca whipplei\n 99998:    Cyperaceae Fimbristylis   Fimbristylis cymosa\n 99999: Commelinaceae    Commelina    Commelina tuberosa\n100000:     Lamiaceae       Salvia    Salvia polystachia\n\n\n\n\n\n\n\n\nEjercicio\n\n\n\n\n\n\nSelecciona las columnas que contengan información acerca de la ubicación geográfica de los registros.\n\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\ninfo_geografica &lt;- c(“countryCode”, “stateProvince”, “decimalLatitude”, “decimalLongitude”, “coordinateUncertaintyInMeters”, “elevation”)\n\nvars_info_geografica &lt;- c(\"countryCode\", \"stateProvince\", \"decimalLatitude\", \"decimalLongitude\", \"coordinateUncertaintyInMeters\", \"elevation\")\n\ndata[,..vars_info_geografica,]\n\n        countryCode                   stateProvince decimalLatitude decimalLongitude coordinateUncertaintyInMeters\n     1:          MX                        Veracruz        19.33330        -96.66670                            NA\n     2:          MX                         Yucatan        21.25417        -89.80833                            70\n     3:          MX                         Chiapas        15.65000        -92.80000                           100\n     4:          MX                         Chiapas        16.08111        -93.47805                           100\n     5:          MX                         Durango        25.54389       -104.59100                            50\n    ---                                                                                                           \n 99996:          MX                          Mexico        20.00583       -100.13200                            80\n 99997:          MX                 Baja California        32.35806       -116.93146                         10000\n 99998:          MX Veracruz de ignacio de la llave        20.20833        -96.79167                            80\n 99999:          MX             Michoacan de ocampo        19.76222       -100.86611                            80\n100000:          MX                        Guerrero        17.46814       -100.13643                         10490\n        elevation\n     1:        NA\n     2:       0.0\n     3:    1400.0\n     4:     473.5\n     5:    1900.0\n    ---          \n 99996:    2400.0\n 99997:        NA\n 99998:        NA\n 99999:    1020.0\n100000:    1300.0"
  },
  {
    "objectID": "tema3.html#renombrar-columnas",
    "href": "tema3.html#renombrar-columnas",
    "title": "Filtros y selección de columnas",
    "section": "Renombrar columnas",
    "text": "Renombrar columnas\nEn el espacio de operaciones sobre las columnas también se pueden renombrar las columnas.\n\ndata[, .(especie = species, genero = genus)]\n\n                      especie       genero\n     1:  Syngonium angustatum    Syngonium\n     2:     Scaevola plumieri     Scaevola\n     3:    Tillandsia fuchsii   Tillandsia\n     4:     Commelina rufipes    Commelina\n     5: Heterosperma pinnatum Heterosperma\n    ---                                   \n 99996:                         Polypodium\n 99997: Hesperoyucca whipplei Hesperoyucca\n 99998:   Fimbristylis cymosa Fimbristylis\n 99999:    Commelina tuberosa    Commelina\n100000:    Salvia polystachia       Salvia"
  },
  {
    "objectID": "tema6.html",
    "href": "tema6.html",
    "title": "Cadenas de operaciones",
    "section": "",
    "text": "Una función muy importante del paquete es la capacidad de encadenar operaciones en un mismo comando sin necesidad de guardar el resultado en algun objeto.\nEs una función similar al uso del pipe %&gt;% o |&gt; en tidyverse o rbase. En data table se pueden evaluar una serie de expresiones una después de la otra escribiendolas entre corchetes de esta manera:\nDT[ ... ][ ... ][ ... ]\no de forma vertical\nDT[ ...\n   ][ ...\n     ][ ...\n       ]\nPor ejemplo, utilizando la tabla de registros de plantas de México podemos:\n\nSeleccionar los registros del género Quercus y filtrar aquellos que no tienen información acerca de la especie o del año de colecta\n\n\nlibrary(data.table)\n\ndata = fread(\"data/plantae_mexico_conCoords_specimen.csv\")\n\ndata[genus == \"Quercus\" & !is.na(species) & species != \"\" & !is.na(year)]\n\nAgrupar por especie y por año de colecta\nContar el número de registros de que se realizó para cada especie en cada año\n\n\ndata[genus == \"Quercus\" & !is.na(species) & species != \"\" & !is.na(year), .(.N), by = .(year,species)]\n\nOrdenar la columna de número de registros de mayor a menor\n\n\ndata[genus == \"Quercus\" & !is.na(species) & species != \"\" & !is.na(year), .(N = .N), by = .(year,species)][order(year,-N)]\n\n\n      year                   species N\n   1: 1827 Quercus toxicodendrifolia 5\n   2: 1827           Quercus repanda 1\n   3: 1827         Quercus caudicans 1\n   4: 1828          Quercus cortesii 1\n   5: 1829        Quercus lancifolia 1\n  ---                                 \n6041: 2023     Quercus hypoleucoides 1\n6042: 2023      Quercus oblongifolia 1\n6043: 2023           Quercus toumeyi 1\n6044: 2023           Quercus viminea 1\n6045: 2023         Quercus arizonica 1"
  },
  {
    "objectID": "tema6.html#ejercicio-y-visualización-de-resultado",
    "href": "tema6.html#ejercicio-y-visualización-de-resultado",
    "title": "Cadenas de operaciones",
    "section": "Ejercicio y visualización de resultado",
    "text": "Ejercicio y visualización de resultado\n\nlibrary(data.table)\nlibrary(tidyverse)\n\ndata = fread(\"data/data_quercus.csv\")\n\nsp_per_year &lt;- data[genus == \"Quercus\" & !is.na(species) & species != \"\" & !is.na(year), .(.N), by = .(year,species)][order(year,-N)]\n\nsp_per_year %&gt;% head() %&gt;% knitr::kable()\n\n\n\n\nyear\nspecies\nN\n\n\n\n\n1827\nQuercus toxicodendrifolia\n5\n\n\n1827\nQuercus repanda\n1\n\n\n1827\nQuercus caudicans\n1\n\n\n1828\nQuercus cortesii\n1\n\n\n1829\nQuercus lancifolia\n1\n\n\n1833\nQuercus rugosa\n1\n\n\n\n\nsp_per_year %&gt;% \n    ggplot(aes(y = fct_reorder(as.factor(species),N), x = year, fill = N))+\n    geom_tile()+\n    theme_bw()"
  },
  {
    "objectID": "tema6.html#ejercicio",
    "href": "tema6.html#ejercicio",
    "title": "Cadenas de operaciones",
    "section": "Ejercicio",
    "text": "Ejercicio\n\n\n      year                   species N\n   1: 1827 Quercus toxicodendrifolia 5\n   2: 1827           Quercus repanda 1\n   3: 1827         Quercus caudicans 1\n   4: 1828          Quercus cortesii 1\n   5: 1829        Quercus lancifolia 1\n  ---                                 \n6041: 2023     Quercus hypoleucoides 1\n6042: 2023      Quercus oblongifolia 1\n6043: 2023           Quercus toumeyi 1\n6044: 2023           Quercus viminea 1\n6045: 2023         Quercus arizonica 1"
  },
  {
    "objectID": "tema7.html",
    "href": "tema7.html",
    "title": "Uniones entre tablas",
    "section": "",
    "text": "Hay dos formas de escribir uniones entre tablas usando data.table. La primera es mediante la función merge() de r base. Los argumentos básicos de esta función son:\nmerge(x, y, by = intersect(names(x), names(y)),\n      by.x = by, by.y = by, all = FALSE, all.x = all, all.y = all,\n      sort = TRUE, suffixes = c(\".x\",\".y\"), no.dups = TRUE,\n      incomparables = NULL, ...)\n\nx, y = son los objetos data.table que se quieren unir\nby, by.x, by.y = nombres de las columnas que funcionan como índice para hacer la unión. Cuando ambas tablas tienen el mismo nombre de columna se utiliza by, cuando no se puede especificar el nombre en x (by.x) y el nombre en y (by.y)\nall, all.x, all.y = especifican el tipo de unión. all = T es para hacer full join (mantiene todas las filas de ambas tablas), all.x = T es para hacer left join (mantiene todas las filas de la tabla x), all.y es para hacer right join (mantiene todas las filas de y), all = F es para hacer inner join (solo mantiene las filas que están en ambas tablas)\n\nlibrary(data.table)\n\ndt1 = data.table(id = seq(1,10), letter1 = LETTERS[sample(1:10, replace = T)])\n\ndt2 = data.table(id = seq(6,15), letter2 = LETTERS[sample(1:10, replace = T)])\n\ndt1\n\n    id letter1\n 1:  1       A\n 2:  2       J\n 3:  3       B\n 4:  4       B\n 5:  5       H\n 6:  6       C\n 7:  7       A\n 8:  8       E\n 9:  9       J\n10: 10       F\n\ndt2\n\n    id letter2\n 1:  6       B\n 2:  7       J\n 3:  8       F\n 4:  9       I\n 5: 10       A\n 6: 11       C\n 7: 12       G\n 8: 13       G\n 9: 14       I\n10: 15       B\n\n# inner join\nmerge(dt1,dt2,by = \"id\")\n\n   id letter1 letter2\n1:  6       C       B\n2:  7       A       J\n3:  8       E       F\n4:  9       J       I\n5: 10       F       A\n\n# left join\nmerge(dt1,dt2,by = \"id\", all.x = T)\n\n    id letter1 letter2\n 1:  1       A    &lt;NA&gt;\n 2:  2       J    &lt;NA&gt;\n 3:  3       B    &lt;NA&gt;\n 4:  4       B    &lt;NA&gt;\n 5:  5       H    &lt;NA&gt;\n 6:  6       C       B\n 7:  7       A       J\n 8:  8       E       F\n 9:  9       J       I\n10: 10       F       A\n\n# right join\nmerge(dt1,dt2,by = \"id\", all.y = T)\n\n    id letter1 letter2\n 1:  6       C       B\n 2:  7       A       J\n 3:  8       E       F\n 4:  9       J       I\n 5: 10       F       A\n 6: 11    &lt;NA&gt;       C\n 7: 12    &lt;NA&gt;       G\n 8: 13    &lt;NA&gt;       G\n 9: 14    &lt;NA&gt;       I\n10: 15    &lt;NA&gt;       B\n\n# full join\nmerge(dt1,dt2,by = \"id\", all = T)\n\n    id letter1 letter2\n 1:  1       A    &lt;NA&gt;\n 2:  2       J    &lt;NA&gt;\n 3:  3       B    &lt;NA&gt;\n 4:  4       B    &lt;NA&gt;\n 5:  5       H    &lt;NA&gt;\n 6:  6       C       B\n 7:  7       A       J\n 8:  8       E       F\n 9:  9       J       I\n10: 10       F       A\n11: 11    &lt;NA&gt;       C\n12: 12    &lt;NA&gt;       G\n13: 13    &lt;NA&gt;       G\n14: 14    &lt;NA&gt;       I\n15: 15    &lt;NA&gt;       B"
  },
  {
    "objectID": "tema7.html#función-merge",
    "href": "tema7.html#función-merge",
    "title": "Uniones entre tablas",
    "section": "",
    "text": "Hay dos formas de escribir uniones entre tablas usando data.table. La primera es mediante la función merge() de r base. Los argumentos básicos de esta función son:\nmerge(x, y, by = intersect(names(x), names(y)),\n      by.x = by, by.y = by, all = FALSE, all.x = all, all.y = all,\n      sort = TRUE, suffixes = c(\".x\",\".y\"), no.dups = TRUE,\n      incomparables = NULL, ...)\n\nx, y = son los objetos data.table que se quieren unir\nby, by.x, by.y = nombres de las columnas que funcionan como índice para hacer la unión. Cuando ambas tablas tienen el mismo nombre de columna se utiliza by, cuando no se puede especificar el nombre en x (by.x) y el nombre en y (by.y)\nall, all.x, all.y = especifican el tipo de unión. all = T es para hacer full join (mantiene todas las filas de ambas tablas), all.x = T es para hacer left join (mantiene todas las filas de la tabla x), all.y es para hacer right join (mantiene todas las filas de y), all = F es para hacer inner join (solo mantiene las filas que están en ambas tablas)\n\nlibrary(data.table)\n\ndt1 = data.table(id = seq(1,10), letter1 = LETTERS[sample(1:10, replace = T)])\n\ndt2 = data.table(id = seq(6,15), letter2 = LETTERS[sample(1:10, replace = T)])\n\ndt1\n\n    id letter1\n 1:  1       A\n 2:  2       J\n 3:  3       B\n 4:  4       B\n 5:  5       H\n 6:  6       C\n 7:  7       A\n 8:  8       E\n 9:  9       J\n10: 10       F\n\ndt2\n\n    id letter2\n 1:  6       B\n 2:  7       J\n 3:  8       F\n 4:  9       I\n 5: 10       A\n 6: 11       C\n 7: 12       G\n 8: 13       G\n 9: 14       I\n10: 15       B\n\n# inner join\nmerge(dt1,dt2,by = \"id\")\n\n   id letter1 letter2\n1:  6       C       B\n2:  7       A       J\n3:  8       E       F\n4:  9       J       I\n5: 10       F       A\n\n# left join\nmerge(dt1,dt2,by = \"id\", all.x = T)\n\n    id letter1 letter2\n 1:  1       A    &lt;NA&gt;\n 2:  2       J    &lt;NA&gt;\n 3:  3       B    &lt;NA&gt;\n 4:  4       B    &lt;NA&gt;\n 5:  5       H    &lt;NA&gt;\n 6:  6       C       B\n 7:  7       A       J\n 8:  8       E       F\n 9:  9       J       I\n10: 10       F       A\n\n# right join\nmerge(dt1,dt2,by = \"id\", all.y = T)\n\n    id letter1 letter2\n 1:  6       C       B\n 2:  7       A       J\n 3:  8       E       F\n 4:  9       J       I\n 5: 10       F       A\n 6: 11    &lt;NA&gt;       C\n 7: 12    &lt;NA&gt;       G\n 8: 13    &lt;NA&gt;       G\n 9: 14    &lt;NA&gt;       I\n10: 15    &lt;NA&gt;       B\n\n# full join\nmerge(dt1,dt2,by = \"id\", all = T)\n\n    id letter1 letter2\n 1:  1       A    &lt;NA&gt;\n 2:  2       J    &lt;NA&gt;\n 3:  3       B    &lt;NA&gt;\n 4:  4       B    &lt;NA&gt;\n 5:  5       H    &lt;NA&gt;\n 6:  6       C       B\n 7:  7       A       J\n 8:  8       E       F\n 9:  9       J       I\n10: 10       F       A\n11: 11    &lt;NA&gt;       C\n12: 12    &lt;NA&gt;       G\n13: 13    &lt;NA&gt;       G\n14: 14    &lt;NA&gt;       I\n15: 15    &lt;NA&gt;       B"
  },
  {
    "objectID": "tema7.html#sintaxis-de-data.table",
    "href": "tema7.html#sintaxis-de-data.table",
    "title": "Uniones entre tablas",
    "section": "Sintaxis de data.table",
    "text": "Sintaxis de data.table\nLa segunda forma de hacer uniones entre tablas es usando la sintaxis de data.table.\nDT1[DT2, nomatch = 0]\nSi lo traducimos a la sintaxis de la función anterior entonces la tabla que está por fuera es x, la tabla que está por dentro es y y el argumento nomatch te permite indicar qué hacer con las claves para las que no encuentra coincidencia en ambas tablas. Cuando nomatch = 0 no incluye las claves que no se comparten entre tablas.\n\n# inner join\ndt1[dt2, on = \"id\", nomatch=0]\n\n   id letter1 letter2\n1:  6       C       B\n2:  7       A       J\n3:  8       E       F\n4:  9       J       I\n5: 10       F       A\n\n# left join\ndt1[dt2, on = \"id\"]\n\n    id letter1 letter2\n 1:  6       C       B\n 2:  7       A       J\n 3:  8       E       F\n 4:  9       J       I\n 5: 10       F       A\n 6: 11    &lt;NA&gt;       C\n 7: 12    &lt;NA&gt;       G\n 8: 13    &lt;NA&gt;       G\n 9: 14    &lt;NA&gt;       I\n10: 15    &lt;NA&gt;       B\n\n# right join\ndt2[dt1, on = \"id\"]\n\n    id letter2 letter1\n 1:  1    &lt;NA&gt;       A\n 2:  2    &lt;NA&gt;       J\n 3:  3    &lt;NA&gt;       B\n 4:  4    &lt;NA&gt;       B\n 5:  5    &lt;NA&gt;       H\n 6:  6       B       C\n 7:  7       J       A\n 8:  8       F       E\n 9:  9       I       J\n10: 10       A       F"
  },
  {
    "objectID": "tema7.html#ejercicio",
    "href": "tema7.html#ejercicio",
    "title": "Uniones entre tablas",
    "section": "Ejercicio",
    "text": "Ejercicio\nQueremos averiguar cuántos registros y de cuántas especies de algún género de plantas hay de cada categoría de conservación (IUCN) para México.\nCon lo aprendido en los temas anteriores podemos generar un subconjunto de la tabla de registros que solo tenga los registros de un género (por ejemplo para el género Quercus).\nPaso 1. Filtra la tabla de registros de plantas para México para quedarte con la información de algún género que te guste.\nAdemás, encontramos que utilizando el paquete rredlist podemos buscar el estatus de conservación de la IUCN para algunas especies que nos interesen con la función rl_search.\nEl siguiente código muestra una forma para obtener el estatus de conservación. Lo que hace es buscar los resultados en la base de datos de la lista roja para cada especie en el subconjunto de registros de encinos de la tabla de registros de plantas para México.\n\nlibrary(\"rredlist\")\nlibrary(\"magrittr\")\n\ndata = fread(\"data/data_quercus.csv\")\n\ntoken = \"9bb4facb6d23f48efbf424bb05c0c1ef1cf6f468393bc745d42179ac4aca5fee\"\n\nsp_list = unique(data$species)\nsp_list = sp_list[which(sp_list != \"\")] # quitar elementos vacios\n\nred_list = list()\n\nfor (i in sp_list) {\n        red_list[[i]] &lt;- rl_search(i, key = token)$result\n}\n\n# seleccionar columnas útiles\niucn_data = do.call(rbind,red_list) %&gt;% select(scientific_name, category, population_trend)\n\nwrite.csv(iucn_data, \"data/iucn_data.csv\", row.names = F)\n\nPaso 2: Utiliza el código anterior para generar la tabla de estados de conservación para las especies del género que elegiste.\nPaso 3: Une la tabla de los registros del genero que escogiste con la de estados de conservación\nPaso 4: Haz un resumen del número de registros y el número de especies que hay para cada estado de conservación. Por ejemplo, para los encinos los resultados son los siguientes:\n\n\n\n\n\ncategory\nnumero_registros\nnumero_sp\n\n\n\n\nEN\n996\n19\n\n\nLC\n41064\n96\n\n\nNT\n3214\n18\n\n\nVU\n1876\n9\n\n\nDD\n762\n21\n\n\nCR\n8\n1\n\n\n\n\n\n\n\n\n\n\n\nRespuesta\n\n\n\n\n\n#| echo: false\n\ndata = fread(\"data/data_quercus.csv\")\n\ndataIUCN = fread(\"data/iucn_data.csv\")\nsetnames(dataIUCN, \"scientific_name\", \"species\") # renombrar la columna de scientific_name a species porque es la clave que ambas tablas tienen en comun\n\n# Hacer un left join para añadir la información de la iucn a la tabla de datos\njoin = data[dataIUCN, on = \"species\"]\n\n# Hacer el resumen, primero contando los registros agrupando por especie y por categoría. Después, utilizando una cadena y solo agrupamos por categoría, la suma de las filas dentro de un grupo sería el número de registros que pertenecen a la categoría y el número de filas de cada grupo corresponde al número de especies en la categoría.\n\njoin[,.N,by=.(species,category)][,.(numero_registros = sum(N),numero_sp = .N),by = category]"
  },
  {
    "objectID": "index.html#recursos",
    "href": "index.html#recursos",
    "title": "Introducción y recursos",
    "section": "Recursos",
    "text": "Recursos"
  },
  {
    "objectID": "tema1.html#cheatsheet",
    "href": "tema1.html#cheatsheet",
    "title": "Sintaxis básica",
    "section": "Cheatsheet",
    "text": "Cheatsheet"
  }
]